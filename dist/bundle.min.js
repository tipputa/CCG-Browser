var bio=function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(n,!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}for(var c,f=Object.prototype.hasOwnProperty,p=function(t,e){return null!=t&&f.call(t,e)},d=Object.keys,g=Math.pow(2,53)-1,v=(c="length",function(t){return null==t?void 0:t[c]}),m=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,s){return console.log(e),t.call(e,n,i,s)};case 4:return function(n,i,s,o){return t.call(e,n,i,s,o)}}return function(){return t.apply(e,arguments)}},b=function(t){if(!function(t){var n=e(t);return"function"===n||"object"===n&&!!t}(t))return[];if(d)return d(t);var n=[];for(var i in t)p(t,i)&&n.push(i);return n},y=function(t,e,n){var i,s;if(e=m(e,n),function(t){var e=v(t);return"number"==typeof e&&e>=0&&e<=g}(t))for(i=0,s=t.length;i<s;i++)e(t[i],i,t);else{var o=b(t);for(i=0,s=o.length;i<s;i++)e(t[o[i]],o[i],t)}return t},P=function(t,e){return function(n,i,s){var o=e?[[],[]]:{};return i=m(i,s),y(n,(function(e,s){var a=i(e,s,n);t(o,e,a)})),o}},w=P((function(t,e,n){p(t,n)?t[n].push(e):t[n]=[e]})),q=P((function(t,e,n){p(t,n)?t[n]++:t[n]=1})),x=P((function(t,e,n){t[n]=e})),C=function(t){var e=[];return function(t){for(var n=0;n<t;n++)e.push({})}(t[0].seq.length),y(t,(function(t){var n,i;n=t.seq,i=n.split(""),y(i,(function(t,n){t in e[n]?e[n][t]++:e[n][t]=1}))})),e},S=function(t){var e=[];return y(t,(function(t){t.hasOwnProperty("-")?e.push(!1):e.push(!0)})),e},R=function(t){var e=0;return y(t,(function(t){t.hasOwnProperty("-")||e++})),e},_=function(t,e){var n=[];return y(t,(function(t){t.hasOwnProperty("-")?n.push(t["-"]/e):n.push(0)})),n},k=function(t,e){var n=[];return y(t,(function(t){var i={},s=0;y(t,(function(t,n){var o=-1*t/e*Math.log2(t/e);i[n]=o,s+=o})),i.Entropy=Math.log2(22)-s,y(i,(function(n,s){"Entropy"!==s&&(i[s]=i.Entropy*t[s]/e)})),n.push(i)})),n},O=function(t){var e=[],n={},i=0;return y(t,(function(t,n){t>.1&&"Entropy"!==n&&(e.push({name:n,value:t}),i+=t)})),e.sort((function(t,e){return e.value-t.value})),n.sum=i,n.res=e,n},I=function(t,e){var n=[];return t.length!==e.length?(console.log("not match: "+t.length+" "+e.length),n):(y(t,(function(t,i){e[i]&&n.push(t)})),n)},A=function(t){var e=[];return y(t,(function(t){e.push(">"+t.name),e.push(t.seq)})),e.join("\n")},L=function(t,e){var n=[];return y(t,(function(t){var i=I(t.seq.split(""),e);n.push(">"+t.name),n.push(i.join(""))})),n.join("\n")},M=function(){function t(e){n(this,t),this.elements=e,this.mouse=null}return s(t,[{key:"on",value:function(t,e,n){var i=this,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return y(this.elements,(function(o){o.addEventListener(t,(function(){var t=o.getBoundingClientRect();i.mouse=[event.clientX-t.left-o.clientLeft,event.clientY-t.top-o.clientTop],e.call(n),i.mouse=null}),s)})),this}},{key:"create",value:function(e){var n=[];return y(this.elements,(function(t){var i=document.createElement(e);t.appendChild(i),n.push(i)})),new t(n)}},{key:"style",value:function(t,e){return y(this.elements,(function(n){n.style.setProperty(t,e)})),this}},{key:"attr",value:function(t,e){return y(this.elements,(function(n){n.setAttribute(t,e)})),this}},{key:"setClass",value:function(t){return this.attr("class",t)}},{key:"setID",value:function(t){return this.attr("id",t)}},{key:"html",value:function(t){if(1!=arguments.length){var e=[];return y(this.elements,(function(t){e.push(t.textContent)})),1===e.length?e[0]:e}if(!t)return y(this.elements,(function(e){e.textContent=t})),this;y(this.elements,(function(e){e.textContent=t}))}}]),t}(),E=function(t){return new M([document.getElementById(t)])},j={A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff","-":"rgb(200,200,200)","\\":"rgb(200,200,200)"},B=function(t,e,n){var i,s,o,a=n*e,r=t/60,h=a*(1-Math.abs(r%2-1));0<=r&&r<1?(i=a,s=h,o=0):1<=r&&r<2?(i=h,s=a,o=0):2<=r&&r<3?(i=0,s=a,o=h):3<=r&&r<4?(i=0,s=h,o=a):4<=r&&r<5?(i=h,s=0,o=a):5<=r&&r<6&&(i=a,s=0,o=h);var l=n-a,u=[i+l,s+l,o+l];return i=u[0],s=u[1],o=u[2],[i=Math.floor(255*i),s=Math.floor(255*s),o=Math.floor(255*o)]},W=[],z=1;z>=.5;z-=.1)for(var D=1;D>=.5;D-=.25)for(var H=0;H<360;H++)W.push("rgb("+B(H,D,z).join(",")+")");var T=function(t){return W[12*t]},J=function(t,e){return W[t*e]},G={};G.A=T(0),G.B=T(1),G.C=T(2),G.D=T(3),G.E=T(4),G.F=T(5),G.G=T(6),G.H=T(7),G.I=T(8),G.J=T(9),G.K=T(10),G.L=T(11),G.M=T(12),G.N=T(13),G.O=T(14),G.P=T(15),G.Q=T(16),G.R=T(17),G.S=T(18),G.T=T(19),G.U=T(20),G.V=T(21),G.W=T(22),G.X=T(23),G.Y=T(24),G.Z=T(25),G["-"]="rgb(200,200,200)";var N=function(t,e){var n=document.createElement("a");return n.download=t,n.href=e,n},X=function(t,e){var n=new Blob([t],{type:"type/plain"}),i=window.URL.createObjectURL(n);N(e,i).click()},Y=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,s=new Blob([JSON.stringify(t,n,i)],{type:"application/json"}),o=window.URL.createObjectURL(s);N(e,o).click()},V=function t(){n(this,t),this.height=500,this.width=500,this.mainCanvas=null,this.isDragging=!1},F={width:0,height:0,left:0,top:0,right:0,bottom:0},U={fontSize:13},Z={id:"def",setSize:!1,height:600,width:600,seqHeight:25,isGrouping:!0,colorScheme:j,header:r({},F,{},U,{height:100,top:10,enable:!0}),seqLogo:{enable:!0},nonGapRate:{enable:!0,left:10,top:10,bottom:0,baseColor:"rgb(120,120,120)",highColor:"rgb(30, 30, 250)",th:1},label:r({},F,{},U,{fontSize:13,left:10,top:0,width:300}),sequence:r({},F,{},U,{fontSize:12,left:10,right:10,top:0,width:480,topMargin:0,bottomMargin:0}),scaleBar:r({},U,{fontSize:13,height:40,enable:!0})},K=function(t,e){t.lineWidth=e},Q=function(t,e){t.textAlign=e},$=function(t,e){t.fillStyle=e},tt=function(t,e,n,i,s,o){t.beginPath(),t.moveTo(e,i),t.lineTo(n,s),t.strokeStyle=o,t.stroke()},et=function(t,e,n,i,s){t.font=s,t.fillText(e,n,i)},nt=function(t,e,n){t.clearRect(0,0,e,n)},it=function(){function t(e){n(this,t),this.start=0,this.end=e,this.size=e,this.preStart=-1,this.preEnd=-1}return s(t,[{key:"update",value:function(t){this.start=0,this.end=t,this.size=t,this.preStart=-1,this.preEnd=-1}}]),t}(),st=function(t){function e(t,i){var s;return n(this,e),(s=u(this,h(e).call(this))).id=t,s.container=null,s.inputJson=null,s.options=r({},Z,{},i),s.numSeq=0,s.group=null,s.canvasHeight=0,s.headerContainer=null,s.bodyContainer=null,s.labelContainer=null,s.labelDiv=null,s.canvasContainer=null,s.ctx=null,s.alignmentPosition=null,s.baseWidth=0,s.seqLength=0,s.orderedAlignments=null,s.highlightedIndicies=null,s.isConservedRegionMode=!1,s.conservedRegionBooleanArr=null,s.conservedRegionLength=0,s.headerCanvas=null,s.headerCtx=null,s.seqStat=null,s.gapRate=null,s.shannonEntropyArr=null,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),s(e,[{key:"setContainer",value:function(t){this.container=E(t),this.container.html(""),this.options.id=t,this.options.setSize?(this.height=this.options.height,this.width=this.options.width):(this.width=this.container.elements[0].clientWidth,this.height=this.container.elements[0].clientHeight)}},{key:"setJson",value:function(t){var e=this;this.inputJson=t,this.numSeq=t.sequences.length,this.canvasHeight=this.numSeq*this.options.seqHeight+50,this.seqLength=this.inputJson.sequences[0].seq.length,this.alignmentPosition=new it(this.seqLength),this.seqStat=C(this.inputJson.sequences),this.conservedRegionBooleanArr=S(this.seqStat),this.conservedRegionLength=R(this.seqStat),this.gapRate=_(this.seqStat,this.numSeq),this.shannonEntropyArr=k(this.seqStat,this.numSeq),this.options.isGrouping&&function(){e.group=function(t){var e={},n=0;return y(t,(function(t,i,s){t.group in e?(e[t.group].count++,e[t.group].names.push(t.name)):e[t.group]={count:1,col:J(n++,45),names:[t.name]}})),e}(e.inputJson.sequences);var t=0,n=function(n){y(e.inputJson.sequences,(function(e){e.group===n&&(e.order=t++)}))};for(var i in e.group)n(i)}(),this.orderedAlignments=new Array(this.inputJson.sequences.length),y(this.inputJson.sequences,(function(t){e.orderedAlignments[t.order]=t}))}},{key:"render",value:function(){this._DOMcreate(),this.ctx=this.mainCanvas.elements[0].getContext("2d"),this._initHeader(),this._drawSequenceLabel(),this.drawSequences()}},{key:"zoomInShowSequence",value:function(){this.alignmentPosition.end-this.alignmentPosition.start<20||(this.alignmentPosition.preStart=this.alignmentPosition.start,this.alignmentPosition.preEnd=this.alignmentPosition.end,this.alignmentPosition.start=0,this.alignmentPosition.end=30,this.drawSequences())}},{key:"change2conservedRegion",value:function(){this.isConservedRegionMode=!0,this.alignmentPosition.update(this.conservedRegionLength),this.drawSequences()}},{key:"change2allRegion",value:function(){this.isConservedRegionMode=!1,this.alignmentPosition.update(this.seqLength),this.drawSequences()}},{key:"saveRawJson",value:function(){Y(this.inputJson,"all_rawJson_".concat(this.id,".json"))}},{key:"saveAllSequence",value:function(){X(A(this.inputJson.sequences),"all_alignments_".concat(this.id,".fas"))}},{key:"saveConservedRegion",value:function(){X(L(this.inputJson.sequences,this.conservedRegionBooleanArr),"conservedRegion_alignments_".concat(this.id,".fas"))}},{key:"saveVisualizedRegion",value:function(){var t=this;if(this.isConservedRegionMode){var e=[];y(this.inputJson.sequences,(function(n){var i=I(n.seq.split(""),t.conservedRegionBooleanArr).slice(parseInt(t.alignmentPosition.start+.5),parseInt(t.alignmentPosition.end+.5)).join("");e.push({name:n.name,seq:i})})),X(A(e),"visualizedRegion_conserved_".concat(this.id,".fas"))}else{var n=[];y(this.inputJson.sequences,(function(e){var i=e.seq.substr(parseInt(t.alignmentPosition.start+.5),parseInt(t.alignmentPosition.end+.5)-parseInt(t.alignmentPosition.start+.5));n.push({name:e.name,seq:i})})),X(A(n),"visualizedRegion_".concat(this.id,".fas"))}}},{key:"_DOMcreate",value:function(){var t=this;this.options.sequence.width=this.width-this.options.label.width-this.options.label.left-this.options.sequence.left-this.options.sequence.right,this.headerContainer=this.container.create("div").setID("".concat(this.options.id,"_header")),this.bodyContainer=this.container.create("div").setID("".concat(this.options.id,"_body")).style("position","relative").setClass("d-flex flex-row"),this.canvasContainer=this.bodyContainer.create("div").setID("".concat(this.options.id,"_canvasContainer")).style("position","relative").style("height","".concat(this.canvasHeight,"px")),this.labelContainer=this.bodyContainer.create("div").setID("".concat(this.options.id,"_label")).style("margin-left","".concat(this.options.label.left,"px")).style("margin-top",this.options.label.top+this.options.scaleBar.height+"px"),this.mainCanvas=this.canvasContainer.create("canvas").setID("".concat(this.options.id,"_canvas")).style("position","absolute").style("left",this.options.label.width+this.options.label.left+"px").style("top",this.options.sequence.top+"px").attr("height",this.canvasHeight).attr("width",this.width-this.options.label.width-this.options.label.left),this.mainCanvas.on("mousemove",(function(){event.preventDefault(),t.isDragging&&t._move(event.movementX/window.devicePixelRatio)})).on("mousewheel",(function(){event.preventDefault(),event.deltaY>0?t._zoomOut():event.deltaY<0&&t._zoomIn()})).on("mousedown",(function(){event.preventDefault(),0==event.button&&(t.isDragging=!0)})).on("mouseup",(function(){event.preventDefault(),0==event.button&&(t.isDragging=!1)})).on("mouseout",(function(){t.isDragging=!1})).on("dblclick",(function(){t._resetZoom()}))}},{key:"_initHeader",value:function(){this.options.header.enable&&(this.headerCanvas=this.headerContainer.style("position","relative").style("height",this.options.header.height+2+"px").create("canvas").attr("height",this.options.header.height+2+"px").attr("width",this.width).style("position","absolute"),this.headerCtx=this.headerCanvas.elements[0].getContext("2d"),this.options.header.left=this.options.sequence.left+this.options.label.width+this.options.label.left+this.options.label.right)}},{key:"_updateSortInfo",value:function(t){var e=t.toArray();y(this.inputJson.sequences,(function(t){t.order=e.indexOf(t.name)})),this.drawSequences()}},{key:"drawSequences",value:function(){var t=this;nt(this.ctx,this.width,this.canvasHeight);var e=this.options.seqHeight-this.options.sequence.topMargin-this.options.sequence.bottomMargin;K(this.ctx,e),Q(this.ctx,"center"),y(this.inputJson.sequences,(function(e){t._drawSequence(e)})),this._drawHighlightRect(),this._drawScaleBar(),this._drawHeader()}},{key:"_drawSequence",value:function(t){var e=this,n=this.options.seqHeight-this.options.sequence.topMargin-this.options.sequence.bottomMargin,i=this.options.scaleBar.height+this.options.seqHeight*(t.order+1)+this.options.sequence.topMargin-n/2,s=[];this.isConservedRegionMode?s=I(t.seq.split(""),this.conservedRegionBooleanArr).slice(parseInt(this.alignmentPosition.start+.5),parseInt(this.alignmentPosition.end+.5)):s=t.seq.substr(parseInt(this.alignmentPosition.start+.5),parseInt(this.alignmentPosition.end+.5)-parseInt(this.alignmentPosition.start+.5)).split("");if(0!=s.length){var o=s.length;this.baseWidth=this.options.sequence.width/o,$(this.ctx,"black"),this.ctx.font=this.options.sequence.fontSize+"px Arial serif",this.baseWidth<10?y(s,(function(t,n){tt(e.ctx,e.options.sequence.left+n*e.baseWidth,e.options.sequence.left+(n+1)*e.baseWidth,i,i,e.options.colorScheme[t])})):y(s,(function(t,n){tt(e.ctx,e.options.sequence.left+n*e.baseWidth,e.options.sequence.left+(n+1)*e.baseWidth,i,i,e.options.colorScheme[t]),e.ctx.fillText(t,e.options.sequence.left+n*e.baseWidth+e.baseWidth/2,i+.33*e.options.sequence.fontSize)}))}}},{key:"_drawSequenceLabel",value:function(){var t=this;y(this.orderedAlignments,(function(e,n){t.options.seqHeight;t.labelDiv=t.labelContainer.create("div").attr("data-id",e.name).style("font-size",t.options.label.fontSize+"px").style("color",t.group[e.group].col).style("height",t.options.seqHeight+"px");var i=t.labelDiv.create("p").style("margin","0").style("height",t.options.seqHeight+"px");i.create("span").setClass("handle fas fa-expand-arrows-alt").html(" "),i.elements[0].innerHTML+=e.name+"_"+e.group}))}},{key:"_drawHighlightRect",value:function(){var t=this;y(this.highlightedIndicies,(function(e){var n=e.index,i=t.options.scaleBar.height+t.options.seqHeight*n+t.options.sequence.topMargin;!function(t,e,n,i,s,o,a){t.beginPath(),t.strokeStyle=o,t.lineWidth=a,t.strokeRect(e,n,i,s)}(t.ctx,t.options.sequence.left,i,t.options.sequence.width,t.options.seqHeight,"red",3)}))}},{key:"_drawScaleBar",value:function(){if(this.options.scaleBar.enable){K(this.ctx,1.5);var t=this.alignmentPosition.start,e=this.alignmentPosition.end,n=e-t,i=this.options.sequence.width>500?10:5,s=parseInt(n/i);i=parseInt(n/s),n<30&&this.baseWidth>20&&(i=n,s=1);for(var o=this.options.sequence.left,a=this.options.scaleBar.height-this.options.scaleBar.fontSize/2,r=0;r<i;r++)o=this.options.sequence.left+r*s*this.baseWidth+this.baseWidth/2,et(this.ctx,parseInt(t+r*s+.5+1),o,a,this.options.scaleBar.fontSize+"px Arial serif"),tt(this.ctx,o,o,this.options.scaleBar.height,a+1,"grey");1!==s&&(o=this.options.sequence.left+parseInt(n+.5)*this.baseWidth-this.baseWidth/2,et(this.ctx,parseInt(e),o,a,this.options.scaleBar.fontSize+"px Arial serif"),tt(this.ctx,o,o,this.options.scaleBar.height,a+1,"grey"))}}},{key:"_drawHeader",value:function(){if(this.options.header.enable){nt(this.headerCtx,this.width,this.options.header.height),this._drawNonGrapRate(),this._drawSeqLogo(),K(this.headerCtx,1),n=this.headerCtx,i="black",n.strokeStyle=i;var t=this.options.header.left,e=this.options.header.top;tt(this.headerCtx,t-10,t-10,this.options.header.height+1,e),tt(this.headerCtx,this.width-1,this.width-1,this.options.header.height+1,e),tt(this.headerCtx,t-10,this.width,e,e),tt(this.headerCtx,t-10,this.width,this.options.header.height+1,this.options.header.height+1)}var n,i}},{key:"_drawSeqLogo",value:function(){var t=this;if(this.options.seqLogo.enable&&this.baseWidth>10){Q(this.headerCtx,"center"),$(this.headerCtx,"black"),this.headerCtx.rotate(3*Math.PI/2),et(this.headerCtx,"bits",-this.options.header.height/2,this.options.header.left-35,"14px sans-serif"),this.headerCtx.rotate(1*Math.PI/2),Q(this.headerCtx,"right"),et(this.headerCtx,"0",this.options.header.left-14,this.options.header.height,"12px sans-serif"),et(this.headerCtx,"4.5",this.options.header.left-14,this.options.header.top+6,"12px sans-serif"),K(this.headerCtx,1),Q(this.headerCtx,"center"),this.headerCtx.font="900 "+30*(this.options.header.height-this.options.header.top)/100+'px "Arial Black", Arial, Gadget, sans-serif';var e=Math.log2(22),n=this.options.header.height-this.options.header.top-1,i=n/e,s=this.options.header.left,o=this.options.header.top+1,a=this.baseWidth,r=[];r=this.isConservedRegionMode?I(this.shannonEntropyArr,this.conservedRegionBooleanArr):this.shannonEntropyArr,y(r,(function(r,h){if(h>=parseInt(t.alignmentPosition.start+.5)&&h<=parseInt(t.alignmentPosition.end+.5-1)){var l=O(r),u=n*(1-l.sum/e);y(l.res,(function(r){var l=r.name.replace("-","\\"),c=n*r.value/e,f=c/i;t.headerCtx.transform(1,0,0,f,s+a/2+a*(h-parseInt(t.alignmentPosition.start+.5)),o+c+u),t.headerCtx.fillStyle=j[l],t.headerCtx.fillText(l,0,0,a),t.headerCtx.setTransform(1,0,0,1,0,0),u=c+u}))}}))}}},{key:"_drawNonGrapRate",value:function(){var t=this;if(this.options.nonGapRate.enable&&this.baseWidth<=10&&!this.isConservedRegionMode){Q(this.headerCtx,"center"),$(this.headerCtx,"black"),this.headerCtx.rotate(3*Math.PI/2),et(this.headerCtx,"1 - gap rate",-this.options.header.height/2,this.options.header.left-35,"14px sans-serif"),this.headerCtx.rotate(1*Math.PI/2),Q(this.headerCtx,"right"),et(this.headerCtx,"0",this.options.header.left-14,this.options.header.height,"12px sans-serif"),et(this.headerCtx,"1",this.options.header.left-14,this.options.header.top+6,"12px sans-serif"),Q(this.headerCtx,"center"),K(this.headerCtx,this.baseWidth);var e=this.options.header.height,n=this.options.header.height-this.options.header.top-1;y(this.gapRate,(function(i,s){if(s>=parseInt(t.alignmentPosition.start+.5)&&s<=parseInt(t.alignmentPosition.end+.5-1)){var o=t.options.header.left+(s-parseInt(t.alignmentPosition.start+.5))*t.baseWidth+.5*t.baseWidth;tt(t.headerCtx,o,o,e,e-n*(1-i),1-i>=t.options.nonGapRate.th?t.options.nonGapRate.highColor:t.options.nonGapRate.baseColor)}}))}}},{key:"_zoomIn",value:function(){var t=this.baseWidth<5?20:this.baseWidth<10?10:5;this.alignmentPosition.end-this.alignmentPosition.start>30?(this.alignmentPosition.start+=t,this.alignmentPosition.end-=t,this.drawSequences()):this.alignmentPosition.end-this.alignmentPosition.start>10?(this.alignmentPosition.start+=2,this.alignmentPosition.end-=2,this.drawSequences()):this.alignmentPosition.end-this.alignmentPosition.start>2&&(this.alignmentPosition.start+=1,this.alignmentPosition.end-=1,this.drawSequences())}},{key:"_zoomOut",value:function(){if(this.alignmentPosition.end-this.alignmentPosition.start<30)this.alignmentPosition.start-=2,this.alignmentPosition.end+=2;else{var t=this.baseWidth<5?20:this.baseWidth<10?10:5;if(0==this.alignmentPosition.start&&this.alignmentPosition.end==this.alignmentPosition.size)return;this.alignmentPosition.start-=t,this.alignmentPosition.end+=t,this.alignmentPosition.start<0&&(this.alignmentPosition.start=0),this.alignmentPosition.end>this.alignmentPosition.size&&(this.alignmentPosition.end=this.alignmentPosition.size)}this.drawSequences()}},{key:"_move",value:function(t){if(0!==t){var e=t/this.baseWidth;this.alignmentPosition.start-=e,this.alignmentPosition.end-=e,this.alignmentPosition.end>this.alignmentPosition.size&&(this.alignmentPosition.start+=e,this.alignmentPosition.end=this.alignmentPosition.size),this.alignmentPosition.start<0&&(this.alignmentPosition.start=0,this.alignmentPosition.end+=e),parseInt(this.alignmentPosition.start+.5)===parseInt(this.alignmentPosition.preStart+.5)&&parseInt(this.alignmentPosition.end-this.alignmentPosition.start+.5)===parseInt(this.alignmentPosition.preEnd-this.alignmentPosition.preStart+.5)||(this.alignmentPosition.preStart=this.alignmentPosition.start,this.alignmentPosition.preEnd=this.alignmentPosition.end,this.drawSequences())}}},{key:"_resetZoom",value:function(){this.alignmentPosition.preStart=this.alignmentPosition.start,this.alignmentPosition.preEnd=this.alignmentPosition.end,this.alignmentPosition.start=0,this.alignmentPosition.end=this.alignmentPosition.size,this.drawSequences()}}]),e}(V);return t.Alignment=st,t.CLUSTAL2_COLOR={A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff","-":"rgb(200,200,200)","\\":"rgb(200,200,200)"},t.COLER_ARR=W,t.PROTEIN_COL_V1=G,t.STRAND_COLOR={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8","-":"rgb(200,200,200)","\\":"rgb(200,200,200)"},t.TAYLOR_COLOR=j,t.calcGapRate=_,t.calcShannonEntropy=k,t.conservedRegionLength=R,t.countBy=q,t.each=y,t.exportJson=Y,t.exportSVG=function(t,e){var n,i=t;window.ActiveXObject?n=i.xml:n=(new XMLSerializer).serializeToString(i);N(e+".svg","data:image/svg+xml;utf8,"+n).click()},t.exportText=X,t.filterAndSortEntroy=O,t.generateLink=N,t.getAllSequenceAsFasta=A,t.getColors=J,t.getConservedRegionAsFasta=L,t.getTrueArr=I,t.groupBy=w,t.indexBy=x,t.isConservedRegoin=S,t.json=function(t,e){return fetch(t,e).then((function(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}))},t.select=function(t){return new M([document.querySelector(t)])},t.selectAll=function(t){return new M(document.querySelectorAll(t))},t.selectClass=function(t){return new M([document.getElementsByClassName(t)])},t.selectID=E,t.seqStat=C,t.text=function(t,e){return fetch(t,e).then((function(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}))},t}({});
//# sourceMappingURL=bundle.min.js.map
