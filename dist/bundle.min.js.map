{"version":3,"file":"bundle.min.js","sources":["../src/utils/test.js","../src/utils/color.js","../src/utils/myUnderscore.js","../src/utils/selector.js","../src/common/viewer.js","../src/sequenceAlignment/option.js","../src/sequenceAlignment/multipleSequenceAlignment.js","../src/utils/fetch.js"],"sourcesContent":["/**\r\n * Test functio nto print text message\r\n * @param {*} txt input text message\r\n */\r\nfunction message(txt) {\r\n    console.log(txt);\r\n    console.log(this.v);\r\n}\r\n\r\nclass BaseClass {\r\n    constructor() {\r\n        this.name = \"my name\";\r\n    }\r\n    echoName() {\r\n        console.log(this.name);\r\n    }\r\n}\r\n\r\nclass GraphicBase extends BaseClass {\r\n    constructor() {\r\n        super();\r\n        this.v = \"a\";\r\n        this.name = \"new name\";\r\n        this.echo = message;\r\n    }\r\n\r\n    get() {\r\n        return this.v;\r\n    }\r\n}\r\n\r\n\r\nconst getFunc = (data) => {\r\n    return (txt) => {\r\n        console.log(txt);\r\n    }\r\n}\r\n\r\nexport const func = getFunc(\"tmp\");\r\nexport {\r\n    GraphicBase\r\n}","const hsvToRgb = (H, S, V) => {\r\n    // https://qiita.com/hachisukansw/items/633d1bf6baf008e82847\r\n    var C = V * S;\r\n    var Hp = H / 60;\r\n    var X = C * (1 - Math.abs(Hp % 2 - 1));\r\n\r\n    var R, G, B;\r\n    if (0 <= Hp && Hp < 1) {\r\n        [R, G, B] = [C, X, 0]\r\n    } else if (1 <= Hp && Hp < 2) {\r\n        [R, G, B] = [X, C, 0]\r\n    } else if (2 <= Hp && Hp < 3) {\r\n        [R, G, B] = [0, C, X]\r\n    } else if (3 <= Hp && Hp < 4) {\r\n        [R, G, B] = [0, X, C]\r\n    } else if (4 <= Hp && Hp < 5) {\r\n        [R, G, B] = [X, 0, C]\r\n    } else if (5 <= Hp && Hp < 6) {\r\n        [R, G, B] = [C, 0, X]\r\n    }\r\n\r\n    var m = V - C;\r\n    [R, G, B] = [R + m, G + m, B + m];\r\n\r\n    R = Math.floor(R * 255);\r\n    G = Math.floor(G * 255);\r\n    B = Math.floor(B * 255);\r\n    return [R, G, B];\r\n}\r\n\r\nconst COLER_ARR = []\r\nfor (let k = 1; k >= 0.5; k -= 0.1) {\r\n    for (let j = 1; j >= 0.5; j -= 0.25) {\r\n        for (let i = 0; i < 360; i++) {\r\n            COLER_ARR.push(\"rgb(\" + hsvToRgb(i, j, k).join(\",\") + \")\");\r\n        }\r\n    }\r\n}\r\n\r\nconst getColorPallet = (i) => {\r\n    return COLER_ARR[i * 12]\r\n}\r\n\r\nexport const getColors = (i, stepSize) => {\r\n    return COLER_ARR[i * stepSize]\r\n}\r\n\r\nconst PROTEIN_COL_V1 = {}\r\n\r\nPROTEIN_COL_V1[\"A\"] = getColorPallet(0);\r\nPROTEIN_COL_V1[\"B\"] = getColorPallet(1);\r\nPROTEIN_COL_V1[\"C\"] = getColorPallet(2);\r\nPROTEIN_COL_V1[\"D\"] = getColorPallet(3);\r\nPROTEIN_COL_V1[\"E\"] = getColorPallet(4);\r\nPROTEIN_COL_V1[\"F\"] = getColorPallet(5);\r\nPROTEIN_COL_V1[\"G\"] = getColorPallet(6);\r\nPROTEIN_COL_V1[\"H\"] = getColorPallet(7);\r\nPROTEIN_COL_V1[\"I\"] = getColorPallet(8);\r\nPROTEIN_COL_V1[\"J\"] = getColorPallet(9);\r\nPROTEIN_COL_V1[\"K\"] = getColorPallet(10);\r\nPROTEIN_COL_V1[\"L\"] = getColorPallet(11);\r\nPROTEIN_COL_V1[\"M\"] = getColorPallet(12);\r\nPROTEIN_COL_V1[\"N\"] = getColorPallet(13);\r\nPROTEIN_COL_V1[\"O\"] = getColorPallet(14);\r\nPROTEIN_COL_V1[\"P\"] = getColorPallet(15);\r\nPROTEIN_COL_V1[\"Q\"] = getColorPallet(16);\r\nPROTEIN_COL_V1[\"R\"] = getColorPallet(17);\r\nPROTEIN_COL_V1[\"S\"] = getColorPallet(18);\r\nPROTEIN_COL_V1[\"T\"] = getColorPallet(19);\r\nPROTEIN_COL_V1[\"U\"] = getColorPallet(20);\r\nPROTEIN_COL_V1[\"V\"] = getColorPallet(21);\r\nPROTEIN_COL_V1[\"W\"] = getColorPallet(22);\r\nPROTEIN_COL_V1[\"X\"] = getColorPallet(23);\r\nPROTEIN_COL_V1[\"Y\"] = getColorPallet(24);\r\nPROTEIN_COL_V1[\"Z\"] = getColorPallet(25);\r\nPROTEIN_COL_V1[\"-\"] = \"rgb(200,200,200)\";\r\n\r\nexport {\r\n    PROTEIN_COL_V1,\r\n    COLER_ARR\r\n}","// almost same functions as underscore.js\r\n// ref: https: //underscorejs.org/docs/underscore.html\r\n\r\nconst nativeIsArray = Array.isArray,\r\n    nativeKeys = Object.keys,\r\n    nativeCreate = Object.create;\r\n\r\nconst shallowProperty = function (key) {\r\n    return function (obj) {\r\n        return obj == null ? void 0 : obj[key];\r\n    };\r\n};\r\n\r\nconst MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\nconst getLength = shallowProperty('length');\r\nconst isArrayLike = function (collection) {\r\n    const length = getLength(collection);\r\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\r\n};\r\n\r\nconst optimizeCb = function (func, context, argCount) {\r\n    if (context === void 0) return func;\r\n    switch (argCount == null ? 3 : argCount) {\r\n        case 1:\r\n            return function (value) {\r\n                return func.call(context, value);\r\n            };\r\n        case 3:\r\n            return function (value, index, collection) {\r\n                console.log(context);\r\n                return func.call(context, value, index, collection);\r\n            };\r\n        case 4:\r\n            return function (accumulator, value, index, collection) {\r\n                return func.call(context, accumulator, value, index, collection);\r\n            };\r\n    }\r\n    return function () {\r\n        return func.apply(context, arguments);\r\n    };\r\n};\r\n\r\nconst isObject = function (obj) {\r\n    var type = typeof obj;\r\n    return type === 'function' || type === 'object' && !!obj;\r\n};\r\n\r\nconst getKeys = function (obj) {\r\n    if (!isObject(obj)) return [];\r\n    if (nativeKeys) return nativeKeys(obj);\r\n    var keys = [];\r\n    for (var key in obj)\r\n        if (has(obj, key)) keys.push(key);\r\n\r\n    return keys;\r\n};\r\n\r\n\r\nexport const each = function (obj, iteratee, context) {\r\n    iteratee = optimizeCb(iteratee, context);\r\n    var i, length;\r\n    if (isArrayLike(obj)) {\r\n        for (i = 0, length = obj.length; i < length; i++) {\r\n            iteratee(obj[i], i, obj);\r\n        }\r\n    } else {\r\n        const keys = getKeys(obj);\r\n        for (i = 0, length = keys.length; i < length; i++) {\r\n            iteratee(obj[keys[i]], keys[i], obj);\r\n        }\r\n    }\r\n    return obj;\r\n};","import * as _ from \"./myUnderscore.js\";\r\n\r\n/**\r\n * faster than select;\r\n * @param {string} elements id\r\n */\r\nclass Selector {\r\n    constructor(elements) {\r\n        this.elements = elements;\r\n        this.mouse = null;\r\n    }\r\n\r\n    on(eventType, callback, context, capture = false) {\r\n        _.each(this.elements, (el) => {\r\n            el.addEventListener(eventType, () => {\r\n                const rect = el.getBoundingClientRect();\r\n                this.mouse = [event.clientX - rect.left - el.clientLeft, event.clientY - rect.top - el.clientTop];\r\n                callback.call(context);\r\n                this.mouse = null;\r\n            }, capture);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    create(elementName) {\r\n        const elements = [];\r\n        _.each(this.elements, (el) => {\r\n            const newEle = document.createElement(elementName);\r\n            el.appendChild(newEle);\r\n            elements.push(el.lastElementChild);\r\n        });\r\n        return new Selector(elements);\r\n    }\r\n\r\n    style(stylName, styleValue) {\r\n        _.each(this.elements, (el) => {\r\n            el.style.setProperty(stylName, styleValue);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    attr(attrName, attrValue) {\r\n        _.each(this.elements, (el) => {\r\n            el.setAttribute(attrName, attrValue);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    setClass(className) {\r\n        return this.attr(\"class\", className);\r\n    }\r\n\r\n    setID(idName) {\r\n        return this.attr(\"id\", idName);\r\n    }\r\n\r\n    html(text) {\r\n        if (arguments.length == 1) {\r\n            if (text) {\r\n                _.each(this.elements, (el) => {\r\n                    el.textContent = text;\r\n                });\r\n            } else {\r\n                _.each(this.elements, (el) => {\r\n                    el.textContent = text;\r\n                });\r\n                return this;\r\n            }\r\n        } else {\r\n            const res = []\r\n            _.each(this.elements, (el) => {\r\n                res.push(el.textContent);\r\n            });\r\n            if (res.length === 1) return res[0];\r\n            return res;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * faster than select;\r\n * @param {string} idName ID name\r\n */\r\nexport const selectID = (idName) => {\r\n    return new Selector([document.getElementById(idName)]);\r\n}\r\n\r\n/**\r\n * faster than select;\r\n * @param {string} className class name\r\n */\r\nexport const selectClass = (className) => {\r\n    return new Selector([document.getElementsByClassName(className)]);\r\n}\r\n\r\n/**\r\n * selectID or selectClass is much fast;\r\n * @param {string} name css name\r\n */\r\nexport const select = (name) => {\r\n    return new Selector(\r\n        [document.querySelector(name)]\r\n    );\r\n}\r\n\r\n/**\r\n * selectID or selectClass is much fast;\r\n * @param {string} name css name\r\n */\r\nexport const selectAll = (name) => {\r\n    return new Selector(document.querySelectorAll(name));\r\n}","export class Viewer {\r\n    constructor() {\r\n        this.height = 500;\r\n        this.width = 500;\r\n        this.mainCanvas = null;\r\n        this.isDragging = false;\r\n    }\r\n}","const size = {\r\n    width: 0,\r\n    height: 0,\r\n    left: 0,\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n}\r\n\r\nconst font = {\r\n    fontSize: 13\r\n}\r\nexport const options = {\r\n    id: \"def\",\r\n    setSize: false,\r\n    height: 600,\r\n    width: 600,\r\n    seqHeight: 12,\r\n    isGrouping: true,\r\n    header: {\r\n        ...size,\r\n        ...font,\r\n        height: 50\r\n    },\r\n    label: {\r\n        ...size,\r\n        ...font,\r\n        fontSize: 9,\r\n        left: 10,\r\n        top: 0,\r\n        width: 200\r\n    },\r\n    sequence: {\r\n        ...size,\r\n        ...font,\r\n        fontSize: 9,\r\n        left: 10,\r\n        top: 3,\r\n        width: 480,\r\n        topMargin: 0,\r\n        bottomMargin: 0\r\n    }\r\n}","import {\r\n    Viewer\r\n} from \"../common/viewer\";\r\nimport {\r\n    options\r\n} from \"./option\";\r\nimport * as utils from \"../utils/index\";\r\n\r\nclass AlignmentPosition {\r\n    constructor(size) {\r\n        this.start = 0;\r\n        this.end = size;\r\n        this.size = size;\r\n    }\r\n}\r\n\r\nconst getGroup = (dicArr) => {\r\n    const _group = {};\r\n    let counter = 0;\r\n    utils.each(dicArr, (val, i, arr) => {\r\n        if (val[\"group\"] in _group) {\r\n            _group[val[\"group\"]].count++;\r\n            _group[val[\"group\"]].names.push(val[\"name\"])\r\n        } else {\r\n            _group[val[\"group\"]] = {\r\n                count: 1,\r\n                col: utils.getColors(counter++, 45),\r\n                names: [val[\"name\"]]\r\n            }\r\n        }\r\n    });\r\n    return _group;\r\n}\r\n\r\nconst drawCtx = (ctx) => {\r\n    ctx.beginPath();\r\n    ctx.moveTo(200, 50);\r\n    ctx.lineTo(250, 200);\r\n    ctx.lineWidth = 100;\r\n    ctx.strokeStyle = \"black\";\r\n    ctx.fillStyle = \"black\"\r\n    ctx.stroke();\r\n}\r\n\r\nconst initCtx = (ctx, lineWidth) => {\r\n    ctx.lineWidth = lineWidth\r\n}\r\n\r\nconst drawLine = (ctx, startX, endX, startY, endY, strokeStyle) => {\r\n    ctx.beginPath();\r\n    ctx.moveTo(startX, startY);\r\n    ctx.lineTo(endX, endY);\r\n    ctx.strokeStyle = strokeStyle;\r\n    ctx.stroke();\r\n}\r\n\r\nconst refreshCtx = (ctx, width, height) => {\r\n    ctx.clearRect(0, 0, width, height);\r\n}\r\n\r\nexport class Alignment extends Viewer {\r\n    constructor() {\r\n        super();\r\n        this.container = null;\r\n        this.inputJson = null;\r\n        this.options = {\r\n            ...options,\r\n        }\r\n\r\n        this.numSeq = 0;\r\n        this.group = null;\r\n\r\n        this.canvasHeight = 0;\r\n        this.headerContainer = null;\r\n        this.bodyContainer = null;\r\n        this.labelContainer = null;\r\n        this.canvasContainer = null;\r\n        this.ctx = null;\r\n        this.alignmentPosition = null;\r\n        this.baseWidth = 0;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {string} elementID without # \r\n     */\r\n    setContainer(elementID) {\r\n        this.container = utils.selectID(elementID);\r\n        this.options.id = elementID;\r\n        if (!this.options.setSize) {\r\n            this.width = this.container.elements[0].clientWidth;\r\n            this.height = this.container.elements[0].clientHeight;\r\n        } else {\r\n            this.height = this.options.height;\r\n            this.width = this.options.width;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {json} json \r\n     */\r\n    setJson(json) {\r\n        this.inputJson = json;\r\n        this.numSeq = json[\"sequences\"].length;\r\n        this.canvasHeight = this.numSeq * this.options.seqHeight + 50;\r\n        this.alignmentPosition = new AlignmentPosition(json[\"sequences\"][0][\"seq\"].length);\r\n    }\r\n\r\n    render() {\r\n        if (this.options.isGrouping) {\r\n            this.group = getGroup(this.inputJson[\"sequences\"]);\r\n            let counter = 0;\r\n            for (const key in this.group) {\r\n                const name = key;\r\n                utils.each(this.inputJson[\"sequences\"], (val) => {\r\n                    if (val.group === key) {\r\n                        val.order = counter++;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        this._DOMcreate();\r\n        this._drawSequences();\r\n    }\r\n\r\n    _DOMcreate() {\r\n        this.options.sequence.width = this.width - this.options.label.width - this.options.label.left - this.options.sequence.left - this.options.sequence.right;\r\n\r\n        this.headerContainer = this.container.create(\"div\")\r\n            .setID(`${this.options.id}_header`)\r\n        /*   .style(\"height\", this.options.header.height + \"px\")\r\n           .style(\"background-color\", \"green\")\r\n           .html(\"Alignment Viewer Header\");\r\n           */\r\n        this.bodyContainer = this.container.create(\"div\")\r\n            .setID(`${this.options.id}_body`)\r\n            .style(\"position\", \"relative\")\r\n        /*\r\n                this.labelContainer = this.bodyContainer.create(\"div\")\r\n                    .setID(`${this.options.id}_label`)\r\n                    .style(\"position\", \"absolute\")\r\n                    .style(\"height\", `${this.canvasHeight}px`)\r\n                    .style(\"width\", `${this.options.label.width}px`)\r\n                    .style(\"margin-left\", `${this.options.label.left}px`)\r\n                    .style(\"margin-top\", `${this.options.label.top}px`);\r\n          */\r\n        this.canvasContainer = this.bodyContainer.create(\"div\")\r\n            .setID(`${this.options.id}_canvasContainer`)\r\n            .style(\"position\", \"relative\")\r\n            .style(\"height\", `${this.canvasHeight}px`);\r\n\r\n        this.mainCanvas = this.canvasContainer.create(\"canvas\")\r\n            .setID(`${this.options.id}_canvas`)\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"left\", (this.options.label.width + this.options.label.left + this.options.sequence.left) + \"px\")\r\n            .style(\"top\", this.options.sequence.top + \"px\")\r\n            .attr(\"height\", this.canvasHeight)\r\n            .attr(\"width\", this.options.sequence.width);\r\n        this.mainCanvas\r\n            .on(\"mousemove\", () => {\r\n                event.preventDefault();\r\n                if (this.isDragging) {\r\n                    this._move(event.movementX);\r\n                }\r\n            })\r\n            .on(\"mousewheel\", () => {\r\n                event.preventDefault();\r\n                if (event.deltaY > 0) {\r\n                    this._zoomOut();\r\n                } else if (event.deltaY < 0) {\r\n                    this._zoomIn();\r\n                }\r\n            })\r\n            .on(\"mousedown\", () => {\r\n                event.preventDefault();\r\n                // 0: left button, 1: wheel, 2: right\r\n                if (event.button == 0) {\r\n                    this.isDragging = true;\r\n                }\r\n            })\r\n            .on(\"mouseup\", () => {\r\n                event.preventDefault();\r\n                // 0: left button, 1: wheel, 2: right\r\n                if (event.button == 0) {\r\n                    this.isDragging = false;\r\n                }\r\n            })\r\n            .on(\"mouseout\", () => {\r\n                this.isDragging = false;\r\n            })\r\n            .on(\"dblclick\", () => {\r\n                this._zoomIn();\r\n            });\r\n\r\n        this.ctx = this.mainCanvas.elements[0].getContext(\"2d\");\r\n        utils.each(this.inputJson[\"sequences\"], (val) => {\r\n            this._drawSequenceLabel(val);\r\n        });\r\n    }\r\n\r\n    _drawSequences() {\r\n        refreshCtx(this.ctx, this.options.sequence.width, this.canvasHeight);\r\n        const seqWidth = this.options.seqHeight - this.options.sequence.topMargin - this.options.sequence.bottomMargin;\r\n        initCtx(this.ctx, seqWidth);\r\n        utils.each(this.inputJson[\"sequences\"], (val, i) => {\r\n            this._drawSequence(val, i);\r\n        });\r\n    }\r\n\r\n    _drawSequence(alignment) {\r\n        const y = this.options.seqHeight * (alignment[\"order\"] + 1) + this.options.sequence.topMargin;\r\n        const seq = alignment[\"seq\"].substr(this.alignmentPosition.start, parseInt(this.alignmentPosition.end - this.alignmentPosition.start)).split(\"\");\r\n        this.baseWidth = (this.options.sequence.width) / seq.length\r\n        if (this.baseWidth < 10) {\r\n            utils.each(seq, (val, i) => {\r\n                drawLine(this.ctx, i * this.baseWidth, (i + 1) * this.baseWidth, y, y, utils.PROTEIN_COL_V1[val]);\r\n            });\r\n        } else {\r\n            utils.each(seq, (val, i) => {\r\n                this.ctx.beginPath();\r\n                this.ctx.font = this.options.sequence.fontSize + \"px Arial serif\";\r\n                this.ctx.moveTo(i * this.baseWidth, y);\r\n                this.ctx.lineTo((i + 1) * this.baseWidth, y);\r\n                this.ctx.strokeStyle = utils.PROTEIN_COL_V1[val];\r\n                this.ctx.fillStyle = \"black\";\r\n                this.ctx.textAlign = \"center\";\r\n                this.ctx.stroke();\r\n                this.ctx.fillText(val, (i * this.baseWidth) + this.baseWidth / 2, y + this.options.sequence.fontSize * 0.33);\r\n\r\n            });\r\n        }\r\n    }\r\n\r\n    _drawSequenceLabel(alignment) {\r\n        const y = this.options.seqHeight * (alignment.order + 1) - this.options.label.fontSize / 2;\r\n        this.bodyContainer.create(\"div\")\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"top\", y + \"px\")\r\n            .style(\"font-size\", this.options.label.fontSize + \"px\")\r\n            .style(\"color\", this.group[alignment[\"group\"]].col)\r\n            .html(alignment.name + \"_\" + alignment[\"group\"]);\r\n    }\r\n\r\n    _zoomIn() {\r\n        let zoomSize = 5;\r\n        if (this.alignmentPosition.end - this.alignmentPosition.start > 30) {\r\n            this.alignmentPosition.start += zoomSize;\r\n            this.alignmentPosition.end -= zoomSize;\r\n        }\r\n        this._drawSequences();\r\n    }\r\n\r\n    _zoomOut() {\r\n        let zoomSize = 5;\r\n        if (this.alignmentPosition.start == 0 && this.alignmentPosition.end == this.alignmentPosition.size) return;\r\n        this.alignmentPosition.start -= zoomSize;\r\n        this.alignmentPosition.end += zoomSize;\r\n        if (this.alignmentPosition.start < 0) {\r\n            this.alignmentPosition.start = 0;\r\n        }\r\n        if (this.alignmentPosition.end > this.alignmentPosition.size) {\r\n            this.alignmentPosition.end = this.alignmentPosition.size;\r\n        }\r\n        this._drawSequences();\r\n    }\r\n\r\n    _move(x) {\r\n        let moveSize = 10;\r\n        if (x > 10) {\r\n            moveSize = 10;\r\n        } else {\r\n            moveSize = 5;\r\n        }\r\n        if (x < 0) {\r\n            this.alignmentPosition.start += moveSize;\r\n            this.alignmentPosition.end += moveSize;\r\n            if (this.alignmentPosition.end > this.alignmentPosition.size) {\r\n                let diff = this.alignmentPosition.end - this.alignmentPosition.size\r\n                this.alignmentPosition.start -= diff;\r\n                this.alignmentPosition.end -= diff;\r\n            }\r\n        } else {\r\n            this.alignmentPosition.start -= moveSize;\r\n            this.alignmentPosition.end -= moveSize;\r\n            if (this.alignmentPosition.start < 0) {\r\n                this.alignmentPosition.start = 0;\r\n                this.alignmentPosition.end += moveSize;\r\n            }\r\n        }\r\n        this._drawSequences();\r\n    }\r\n\r\n}","//\r\n// my fetch functions\r\n// ref: https://github.com/d3/d3-fetch\r\n\r\nexport const text = (input, init) => {\r\n    return fetch(input, init).then((response) => {\r\n        if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\r\n        return response.text();\r\n    });\r\n}\r\n\r\nexport const json = (input, init) => {\r\n    return fetch(input, init).then((response) => {\r\n        if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\r\n        return response.json();\r\n    });\r\n}"],"names":["message","txt","console","log","this","v","key","GraphicBase","name","echo","func","nativeKeys","Object","keys","MAX_ARRAY_INDEX","Math","pow","getLength","obj","getKeys","type","isObject","has","push","each","iteratee","context","i","length","argCount","value","call","index","collection","accumulator","apply","arguments","optimizeCb","isArrayLike","Selector","elements","mouse","eventType","callback","capture","_","el","addEventListener","rect","getBoundingClientRect","_this","event","clientX","left","clientLeft","clientY","top","clientTop","elementName","newEle","document","createElement","appendChild","lastElementChild","stylName","styleValue","style","setProperty","attrName","attrValue","setAttribute","className","attr","idName","text","res","textContent","selectID","getElementById","hsvToRgb","H","S","V","R","G","B","C","Hp","X","abs","m","floor","COLER_ARR","k","j","join","getColorPallet","getColors","stepSize","PROTEIN_COL_V1","Viewer","height","width","mainCanvas","isDragging","size","right","bottom","font","fontSize","options","id","setSize","seqHeight","isGrouping","header","label","sequence","topMargin","bottomMargin","AlignmentPosition","start","end","Alignment","container","inputJson","numSeq","group","canvasHeight","headerContainer","bodyContainer","labelContainer","canvasContainer","ctx","alignmentPosition","baseWidth","elementID","utils","clientWidth","clientHeight","json","_this2","dicArr","_group","counter","val","arr","count","names","col","getGroup","order","_DOMcreate","_drawSequences","create","setID","on","preventDefault","_this3","_move","movementX","deltaY","_zoomOut","_zoomIn","button","getContext","_drawSequenceLabel","clearRect","seqWidth","lineWidth","initCtx","_this4","_drawSequence","alignment","y","seq","substr","parseInt","split","startX","endX","startY","endY","strokeStyle","_this5","beginPath","moveTo","lineTo","stroke","fillStyle","textAlign","fillText","html","x","moveSize","diff","input","init","fetch","then","response","ok","Error","status","statusText","querySelector","querySelectorAll","getElementsByClassName"],"mappings":"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"}