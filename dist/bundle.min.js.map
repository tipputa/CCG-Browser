{"version":3,"file":"bundle.min.js","sources":["../src/utils/color.js","../src/utils/myUnderscore.js","../src/utils/sequence.js","../src/utils/selector.js","../src/utils/download.js","../src/common/viewer.js","../src/sequenceAlignment/option.js","../src/utils/canvas.js","../src/sequenceAlignment/multipleSequenceAlignment.js","../src/utils/fetch.js"],"sourcesContent":["// colors: https://github.com/wilzbach/msa-colorschemes/tree/master/src\r\nexport const CLUSTAL2_COLOR = {\r\n    A: \"#80a0f0\",\r\n    R: \"#f01505\",\r\n    N: \"#00ff00\",\r\n    D: \"#c048c0\",\r\n    C: \"#f08080\",\r\n    Q: \"#00ff00\",\r\n    E: \"#c048c0\",\r\n    G: \"#f09048\",\r\n    H: \"#15a4a4\",\r\n    I: \"#80a0f0\",\r\n    L: \"#80a0f0\",\r\n    K: \"#f01505\",\r\n    M: \"#80a0f0\",\r\n    F: \"#80a0f0\",\r\n    P: \"#ffff00\",\r\n    S: \"#00ff00\",\r\n    T: \"#00ff00\",\r\n    W: \"#80a0f0\",\r\n    Y: \"#15a4a4\",\r\n    V: \"#80a0f0\",\r\n    B: \"#fff\",\r\n    X: \"#fff\",\r\n    Z: \"#fff\",\r\n    \"-\": \"rgb(200,200,200)\",\r\n    \"\\\\\": \"rgb(200,200,200)\"\r\n}\r\n\r\nexport const STRAND_COLOR = {\r\n    A: \"#5858a7\",\r\n    R: \"#6b6b94\",\r\n    N: \"#64649b\",\r\n    D: \"#2121de\",\r\n    C: \"#9d9d62\",\r\n    Q: \"#8c8c73\",\r\n    E: \"#0000ff\",\r\n    G: \"#4949b6\",\r\n    H: \"#60609f\",\r\n    I: \"#ecec13\",\r\n    L: \"#b2b24d\",\r\n    K: \"#4747b8\",\r\n    M: \"#82827d\",\r\n    F: \"#c2c23d\",\r\n    P: \"#2323dc\",\r\n    S: \"#4949b6\",\r\n    T: \"#9d9d62\",\r\n    W: \"#c0c03f\",\r\n    Y: \"#d3d32c\",\r\n    V: \"#ffff00\",\r\n    B: \"#4343bc\",\r\n    X: \"#797986\",\r\n    Z: \"#4747b8\",\r\n    \"-\": \"rgb(200,200,200)\",\r\n    \"\\\\\": \"rgb(200,200,200)\"\r\n}\r\nexport const TAYLOR_COLOR = {\r\n    A: \"#ccff00\",\r\n    R: \"#0000ff\",\r\n    N: \"#cc00ff\",\r\n    D: \"#ff0000\",\r\n    C: \"#ffff00\",\r\n    Q: \"#ff00cc\",\r\n    E: \"#ff0066\",\r\n    G: \"#ff9900\",\r\n    H: \"#0066ff\",\r\n    I: \"#66ff00\",\r\n    L: \"#33ff00\",\r\n    K: \"#6600ff\",\r\n    M: \"#00ff00\",\r\n    F: \"#00ff66\",\r\n    P: \"#ffcc00\",\r\n    S: \"#ff3300\",\r\n    T: \"#ff6600\",\r\n    W: \"#00ccff\",\r\n    Y: \"#00ffcc\",\r\n    V: \"#99ff00\",\r\n    B: \"#fff\",\r\n    X: \"#fff\",\r\n    Z: \"#fff\",\r\n    \"-\": \"rgb(200,200,200)\",\r\n    \"\\\\\": \"rgb(200,200,200)\"\r\n}\r\n\r\nconst hsvToRgb = (H, S, V) => {\r\n    // https://qiita.com/hachisukansw/items/633d1bf6baf008e82847\r\n    var C = V * S;\r\n    var Hp = H / 60;\r\n    var X = C * (1 - Math.abs(Hp % 2 - 1));\r\n\r\n    var R, G, B;\r\n    if (0 <= Hp && Hp < 1) {\r\n        [R, G, B] = [C, X, 0]\r\n    } else if (1 <= Hp && Hp < 2) {\r\n        [R, G, B] = [X, C, 0]\r\n    } else if (2 <= Hp && Hp < 3) {\r\n        [R, G, B] = [0, C, X]\r\n    } else if (3 <= Hp && Hp < 4) {\r\n        [R, G, B] = [0, X, C]\r\n    } else if (4 <= Hp && Hp < 5) {\r\n        [R, G, B] = [X, 0, C]\r\n    } else if (5 <= Hp && Hp < 6) {\r\n        [R, G, B] = [C, 0, X]\r\n    }\r\n\r\n    var m = V - C;\r\n    [R, G, B] = [R + m, G + m, B + m];\r\n\r\n    R = Math.floor(R * 255);\r\n    G = Math.floor(G * 255);\r\n    B = Math.floor(B * 255);\r\n    return [R, G, B];\r\n}\r\n\r\nconst COLER_ARR = []\r\nfor (let k = 1; k >= 0.5; k -= 0.1) {\r\n    for (let j = 1; j >= 0.5; j -= 0.25) {\r\n        for (let i = 0; i < 360; i++) {\r\n            COLER_ARR.push(\"rgb(\" + hsvToRgb(i, j, k).join(\",\") + \")\");\r\n        }\r\n    }\r\n}\r\n\r\nconst getColorPallet = (i) => {\r\n    return COLER_ARR[i * 12]\r\n}\r\n\r\nexport const getColors = (i, stepSize) => {\r\n    return COLER_ARR[i * stepSize]\r\n}\r\n\r\nconst PROTEIN_COL_V1 = {}\r\n\r\nPROTEIN_COL_V1[\"A\"] = getColorPallet(0);\r\nPROTEIN_COL_V1[\"B\"] = getColorPallet(1);\r\nPROTEIN_COL_V1[\"C\"] = getColorPallet(2);\r\nPROTEIN_COL_V1[\"D\"] = getColorPallet(3);\r\nPROTEIN_COL_V1[\"E\"] = getColorPallet(4);\r\nPROTEIN_COL_V1[\"F\"] = getColorPallet(5);\r\nPROTEIN_COL_V1[\"G\"] = getColorPallet(6);\r\nPROTEIN_COL_V1[\"H\"] = getColorPallet(7);\r\nPROTEIN_COL_V1[\"I\"] = getColorPallet(8);\r\nPROTEIN_COL_V1[\"J\"] = getColorPallet(9);\r\nPROTEIN_COL_V1[\"K\"] = getColorPallet(10);\r\nPROTEIN_COL_V1[\"L\"] = getColorPallet(11);\r\nPROTEIN_COL_V1[\"M\"] = getColorPallet(12);\r\nPROTEIN_COL_V1[\"N\"] = getColorPallet(13);\r\nPROTEIN_COL_V1[\"O\"] = getColorPallet(14);\r\nPROTEIN_COL_V1[\"P\"] = getColorPallet(15);\r\nPROTEIN_COL_V1[\"Q\"] = getColorPallet(16);\r\nPROTEIN_COL_V1[\"R\"] = getColorPallet(17);\r\nPROTEIN_COL_V1[\"S\"] = getColorPallet(18);\r\nPROTEIN_COL_V1[\"T\"] = getColorPallet(19);\r\nPROTEIN_COL_V1[\"U\"] = getColorPallet(20);\r\nPROTEIN_COL_V1[\"V\"] = getColorPallet(21);\r\nPROTEIN_COL_V1[\"W\"] = getColorPallet(22);\r\nPROTEIN_COL_V1[\"X\"] = getColorPallet(23);\r\nPROTEIN_COL_V1[\"Y\"] = getColorPallet(24);\r\nPROTEIN_COL_V1[\"Z\"] = getColorPallet(25);\r\nPROTEIN_COL_V1[\"-\"] = \"rgb(200,200,200)\";\r\n\r\nexport {\r\n    PROTEIN_COL_V1,\r\n    COLER_ARR\r\n}","// almost same functions as underscore.js\r\n// ref: https: //underscorejs.org/docs/underscore.html\r\n\r\nconst ObjProto = Object.prototype,\r\n    toString = ObjProto.toString,\r\n    hasOwnProperty = ObjProto.hasOwnProperty;\r\n\r\nconst has = function (obj, path) {\r\n    return obj != null && hasOwnProperty.call(obj, path);\r\n}\r\n\r\n\r\nconst nativeIsArray = Array.isArray,\r\n    nativeKeys = Object.keys,\r\n    nativeCreate = Object.create;\r\n\r\nconst shallowProperty = function (key) {\r\n    return function (obj) {\r\n        return obj == null ? void 0 : obj[key];\r\n    };\r\n};\r\n\r\nconst MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\nconst getLength = shallowProperty('length');\r\nconst isArrayLike = function (collection) {\r\n    const length = getLength(collection);\r\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\r\n};\r\n\r\nconst optimizeCb = function (func, context, argCount) {\r\n    if (context === void 0) return func;\r\n    switch (argCount == null ? 3 : argCount) {\r\n        case 1:\r\n            return function (value) {\r\n                return func.call(context, value);\r\n            };\r\n        case 3:\r\n            return function (value, index, collection) {\r\n                console.log(context);\r\n                return func.call(context, value, index, collection);\r\n            };\r\n        case 4:\r\n            return function (accumulator, value, index, collection) {\r\n                return func.call(context, accumulator, value, index, collection);\r\n            };\r\n    }\r\n    return function () {\r\n        return func.apply(context, arguments);\r\n    };\r\n};\r\n\r\nconst isObject = function (obj) {\r\n    var type = typeof obj;\r\n    return type === 'function' || type === 'object' && !!obj;\r\n};\r\n\r\nconst getKeys = function (obj) {\r\n    if (!isObject(obj)) return [];\r\n    if (nativeKeys) return nativeKeys(obj);\r\n    var keys = [];\r\n    for (var key in obj)\r\n        if (has(obj, key)) keys.push(key);\r\n\r\n    return keys;\r\n};\r\n\r\n\r\nexport const each = function (obj, iteratee, context) {\r\n    iteratee = optimizeCb(iteratee, context);\r\n    var i, length;\r\n    if (isArrayLike(obj)) {\r\n        for (i = 0, length = obj.length; i < length; i++) {\r\n            iteratee(obj[i], i, obj);\r\n        }\r\n    } else {\r\n        const keys = getKeys(obj);\r\n        for (i = 0, length = keys.length; i < length; i++) {\r\n            iteratee(obj[keys[i]], keys[i], obj);\r\n        }\r\n    }\r\n    return obj;\r\n};\r\n\r\nconst group = function (behavior, partition) {\r\n    return function (obj, iteratee, context) {\r\n        var result = partition ? [\r\n            [],\r\n            []\r\n        ] : {};\r\n        iteratee = optimizeCb(iteratee, context);\r\n        each(obj, function (value, index) {\r\n            var key = iteratee(value, index, obj);\r\n            behavior(result, value, key);\r\n        });\r\n        return result;\r\n    };\r\n};\r\n\r\nexport const groupBy = group(function (result, value, key) {\r\n    if (has(result, key)) result[key].push(value);\r\n    else result[key] = [value];\r\n\r\n});\r\n\r\nexport const countBy = group(function (result, value, key) {\r\n    if (has(result, key)) result[key]++;\r\n    else result[key] = 1;\r\n});\r\n\r\nexport const indexBy = group(function (result, value, key) {\r\n    result[key] = value;\r\n});","import {\r\n    each\r\n} from \"./myUnderscore\"\r\n\r\nconst seqGroup = function (behavior, numSeq) {\r\n    return function (obj, iteratee, context) {\r\n        var result = partition ? [\r\n            [],\r\n            []\r\n        ] : {};\r\n        iteratee = optimizeCb(iteratee, context);\r\n        each(obj, function (value, index) {\r\n            var key = iteratee(value, index, obj);\r\n            behavior(result, value, key);\r\n        });\r\n        return result;\r\n    };\r\n}\r\n\r\n\r\nexport const seqStat = (seqs) => {\r\n    const results = [];\r\n    const init = (len) => {\r\n        for (let i = 0; i < len; i++) {\r\n            results.push({});\r\n        }\r\n    }\r\n    const others = (seq) => {\r\n        const seqArr = seq.split(\"\");\r\n        each(seqArr, (val, i) => {\r\n            if (val in results[i]) results[i][val]++;\r\n            else results[i][val] = 1;\r\n        });\r\n    }\r\n\r\n    init(seqs[0].seq.length);\r\n    each(seqs, (val) => {\r\n        others(val.seq);\r\n    });\r\n\r\n    return results\r\n}\r\n\r\nexport const isConservedRegoin = (seqArr) => {\r\n    const conserved = []\r\n    each(seqArr, (val) => {\r\n        if (val.hasOwnProperty(\"-\")) {\r\n            conserved.push(false);\r\n        } else {\r\n            conserved.push(true);\r\n        }\r\n    });\r\n    return conserved;\r\n}\r\n\r\nexport const conservedRegionLength = (seqArr) => {\r\n    let counter = 0;\r\n    each(seqArr, (val) => {\r\n        if (!val.hasOwnProperty(\"-\")) {\r\n            counter++;\r\n        }\r\n    });\r\n    return counter;\r\n}\r\n\r\nexport const calcGapRate = (seqArr, numSeq) => {\r\n    let res = [];\r\n    each(seqArr, (val) => {\r\n        if (val.hasOwnProperty(\"-\")) {\r\n            res.push(val[\"-\"] / numSeq);\r\n        } else res.push(0);\r\n    });\r\n    return res;\r\n}\r\n\r\nexport const calcShannonEntropy = (seqArr, numSeq) => {\r\n    const results = [];\r\n    each(seqArr, (seqs) => {\r\n        const res = {}\r\n        let s = 0;\r\n        each(seqs, (val, key) => {\r\n            const v = -1 * val / numSeq * Math.log2(val / numSeq);\r\n            res[key] = v;\r\n            s += v;\r\n        })\r\n        res[\"Entropy\"] = Math.log2(22) - s;\r\n        each(res, (val, key) => {\r\n            if (key !== \"Entropy\") {\r\n                res[key] = res[\"Entropy\"] * seqs[key] / numSeq;\r\n            }\r\n        });\r\n        results.push(res);\r\n    });\r\n    return results;\r\n}\r\n/**\r\n * return {sum: totalHeight, res: {name: letter, value: letterHeight}}\r\n * @param {*} entropyArr \r\n */\r\nexport const filterAndSortEntroy = (entropyArr) => {\r\n    const res = [];\r\n    const buf = {}\r\n    let s = 0;\r\n    each(entropyArr, (val, key) => {\r\n        if (val > 0.1 && key !== \"Entropy\") {\r\n            res.push({\r\n                name: key,\r\n                value: val\r\n            });\r\n            s += val;\r\n        }\r\n    });\r\n    res.sort((a, b) => {\r\n        return b.value - a.value;\r\n    })\r\n    buf[\"sum\"] = s;\r\n    buf[\"res\"] = res;\r\n    return buf;\r\n}\r\n\r\nexport const getTrueArr = (resourceArr, booleanArr) => {\r\n    const res = [];\r\n    if (resourceArr.length !== booleanArr.length) {\r\n        console.log(\"not match: \" + resourceArr.length + \" \" + booleanArr.length);\r\n        return res;\r\n    }\r\n    each(resourceArr, (val, i) => {\r\n        if (booleanArr[i]) res.push(val);\r\n    });\r\n    return res;\r\n}\r\n\r\nexport const getAllSequenceAsFasta = (sequenceObj) => {\r\n    const ret = [];\r\n    each(sequenceObj, (val) => {\r\n        ret.push(\">\" + val.name);\r\n        ret.push(val.seq);\r\n    })\r\n    const result = ret.join(\"\\n\");\r\n    return result;\r\n}\r\n\r\nexport const getConservedRegionAsFasta = (sequenceObj, booleanArr) => {\r\n    const ret = [];\r\n    each(sequenceObj, (val) => {\r\n        const seqArr = getTrueArr(val.seq.split(\"\"), booleanArr);\r\n        ret.push(\">\" + val.name);\r\n        ret.push(seqArr.join(\"\"));\r\n    })\r\n    const result = ret.join(\"\\n\");\r\n    return result;\r\n}","import * as _ from \"./myUnderscore.js\";\r\n\r\n/**\r\n * faster than select;\r\n * @param {string} elements id\r\n */\r\nclass Selector {\r\n    constructor(elements) {\r\n        this.elements = elements;\r\n        this.mouse = null;\r\n    }\r\n\r\n    on(eventType, callback, context, capture = false) {\r\n        _.each(this.elements, (el) => {\r\n            el.addEventListener(eventType, () => {\r\n                const rect = el.getBoundingClientRect();\r\n                this.mouse = [event.clientX - rect.left - el.clientLeft, event.clientY - rect.top - el.clientTop];\r\n                callback.call(context);\r\n                this.mouse = null;\r\n            }, capture);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    create(elementName) {\r\n        const elements = [];\r\n        _.each(this.elements, (el) => {\r\n            const newEle = document.createElement(elementName);\r\n            el.appendChild(newEle);\r\n            elements.push(newEle);\r\n        });\r\n        return new Selector(elements);\r\n    }\r\n\r\n    style(stylName, styleValue) {\r\n        _.each(this.elements, (el) => {\r\n            el.style.setProperty(stylName, styleValue);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    attr(attrName, attrValue) {\r\n        _.each(this.elements, (el) => {\r\n            el.setAttribute(attrName, attrValue);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    setClass(className) {\r\n        return this.attr(\"class\", className);\r\n    }\r\n\r\n    setID(idName) {\r\n        return this.attr(\"id\", idName);\r\n    }\r\n\r\n    html(text) {\r\n        if (arguments.length == 1) {\r\n            if (text) {\r\n                _.each(this.elements, (el) => {\r\n                    el.textContent = text;\r\n                });\r\n            } else {\r\n                _.each(this.elements, (el) => {\r\n                    el.textContent = text;\r\n                });\r\n                return this;\r\n            }\r\n        } else {\r\n            const res = []\r\n            _.each(this.elements, (el) => {\r\n                res.push(el.textContent);\r\n            });\r\n            if (res.length === 1) return res[0];\r\n            return res;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * faster than select;\r\n * @param {string} idName ID name\r\n */\r\nexport const selectID = (idName) => {\r\n    return new Selector([document.getElementById(idName)]);\r\n}\r\n\r\n/**\r\n * faster than select;\r\n * @param {string} className class name\r\n */\r\nexport const selectClass = (className) => {\r\n    return new Selector([document.getElementsByClassName(className)]);\r\n}\r\n\r\n/**\r\n * selectID or selectClass is much fast;\r\n * @param {string} name css name\r\n */\r\nexport const select = (name) => {\r\n    return new Selector(\r\n        [document.querySelector(name)]\r\n    );\r\n}\r\n\r\n/**\r\n * selectID or selectClass is much fast;\r\n * @param {string} name css name\r\n */\r\nexport const selectAll = (name) => {\r\n    return new Selector(document.querySelectorAll(name));\r\n}","// download https://jsgao0.wordpress.com/2016/06/01/export-svg-file-using-xmlserializer/\r\nexport const generateLink = (fileName, dataPath) => {\r\n    var link = document.createElement('a'); // Create a element.\r\n    link.download = fileName; // Set value as the file name of download file.\r\n    link.href = dataPath; // Set value as the file content of download file.\r\n    return link;\r\n}\r\n\r\nexport const exportSVG = (svgElement, fileName) => {\r\n    var svg = svgElement;\r\n    var svgString;\r\n    if (window.ActiveXObject) {\r\n        svgString = svg.xml;\r\n    } else {\r\n        var oSerializer = new XMLSerializer();\r\n        svgString = oSerializer.serializeToString(svg);\r\n    }\r\n    generateLink(fileName + '.svg', 'data:image/svg+xml;utf8,' + svgString).click();\r\n}\r\n\r\nexport const exportText = (textString, fileName) => {\r\n    const blob = new Blob(\r\n        [textString], {\r\n            type: \"type/plain\"\r\n        }\r\n    );\r\n    const url = window.URL.createObjectURL(blob);\r\n    generateLink(fileName, url).click();\r\n}\r\n\r\n// replacer:  https://qiita.com/qoAop/items/57d35a41ef9629351c3c\r\nexport const exportJson = (json, fileName, replacer = null, indent = 4) => {\r\n    const blob = new Blob(\r\n        [JSON.stringify(json, replacer, indent)], {\r\n            type: \"application/json\"\r\n        }\r\n    );\r\n    const url = window.URL.createObjectURL(blob);\r\n    generateLink(fileName, url).click();\r\n}","export class Viewer {\r\n    constructor() {\r\n        this.height = 500;\r\n        this.width = 500;\r\n        this.mainCanvas = null;\r\n        this.isDragging = false;\r\n    }\r\n}","import * as col from \"../utils/color\"\r\nconst size = {\r\n    width: 0,\r\n    height: 0,\r\n    left: 0,\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n}\r\n\r\nconst font = {\r\n    fontSize: 13\r\n}\r\nexport const options = {\r\n    id: \"def\",\r\n    setSize: false,\r\n    height: 600,\r\n    width: 600,\r\n    seqHeight: 25,\r\n    isGrouping: true,\r\n    colorScheme: col.TAYLOR_COLOR,\r\n    header: {\r\n        ...size,\r\n        ...font,\r\n        height: 100,\r\n        top: 10,\r\n        enable: true,\r\n    },\r\n    seqLogo: {\r\n        enable: true,\r\n    },\r\n    nonGapRate: {\r\n        enable: true,\r\n        left: 10,\r\n        top: 10,\r\n        bottom: 0,\r\n        baseColor: \"rgb(120,120,120)\",\r\n        highColor: \"rgb(30, 30, 250)\",\r\n        th: 1,\r\n    },\r\n    label: {\r\n        ...size,\r\n        ...font,\r\n        fontSize: 13,\r\n        left: 10,\r\n        top: 0,\r\n        width: 300\r\n    },\r\n    sequence: {\r\n        ...size,\r\n        ...font,\r\n        fontSize: 12,\r\n        left: 10,\r\n        right: 10,\r\n        top: 0,\r\n        width: 480,\r\n        topMargin: 0,\r\n        bottomMargin: 0\r\n    },\r\n    scaleBar: {\r\n        ...font,\r\n        fontSize: 13,\r\n        height: 40,\r\n        enable: true,\r\n    }\r\n}","export const setLineWidth = (ctx, lineWidth) => {\r\n    ctx.lineWidth = lineWidth\r\n}\r\n\r\nexport const setTextAlign = (ctx, align) => {\r\n    ctx.textAlign = align; // center\r\n}\r\n\r\nexport const setFillStyle = (ctx, fStyle) => {\r\n    ctx.fillStyle = fStyle;\r\n}\r\n\r\nexport const setStrokeStyle = (ctx, sStyle) => {\r\n    ctx.strokeStyle = sStyle;\r\n}\r\n\r\nexport const drawLine = (ctx, startX, endX, startY, endY, strokeStyle) => {\r\n    ctx.beginPath();\r\n    ctx.moveTo(startX, startY);\r\n    ctx.lineTo(endX, endY);\r\n    ctx.strokeStyle = strokeStyle;\r\n    ctx.stroke();\r\n}\r\n\r\nexport const drawRect = (ctx, x, y, width, height, strokeStyle, lineWidth) => {\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = strokeStyle;\r\n    ctx.lineWidth = lineWidth;\r\n    ctx.strokeRect(x, y, width, height);\r\n}\r\n\r\nexport const drawTxt = (ctx, text, x, y, font) => {\r\n    ctx.font = font\r\n    ctx.fillText(text, x, y);\r\n}\r\n\r\nexport const clear = (ctx, width, height) => {\r\n    ctx.clearRect(0, 0, width, height);\r\n}","import {\r\n    Viewer\r\n} from \"../common/viewer\";\r\nimport {\r\n    options\r\n} from \"./option\";\r\nimport * as drawer from \"../utils/canvas\"\r\n\r\nimport * as utils from \"../utils/index\";\r\n\r\nclass AlignmentPosition {\r\n    constructor(size) {\r\n        this.start = 0;\r\n        this.end = size;\r\n        this.size = size;\r\n        this.preStart = -1;\r\n        this.preEnd = -1;\r\n    }\r\n    update(size) {\r\n        this.start = 0;\r\n        this.end = size;\r\n        this.size = size;\r\n        this.preStart = -1;\r\n        this.preEnd = -1;\r\n    }\r\n}\r\n\r\nconst getGroup = (dicArr) => {\r\n    const _group = {};\r\n    let counter = 0;\r\n    utils.each(dicArr, (val, i, arr) => {\r\n        if (val[\"group\"] in _group) {\r\n            _group[val[\"group\"]].count++;\r\n            _group[val[\"group\"]].names.push(val[\"name\"])\r\n        } else {\r\n            _group[val[\"group\"]] = {\r\n                count: 1,\r\n                col: utils.getColors(counter++, 45),\r\n                names: [val[\"name\"]]\r\n            }\r\n        }\r\n    });\r\n    return _group;\r\n}\r\n\r\n\r\n\r\nexport class Alignment extends Viewer {\r\n    constructor(id, opt) {\r\n        super();\r\n        this.id = id;\r\n        this.container = null;\r\n        this.inputJson = null;\r\n        this.options = {\r\n            ...options,\r\n            ...opt,\r\n        }\r\n\r\n        this.numSeq = 0;\r\n        this.group = null;\r\n\r\n        this.canvasHeight = 0;\r\n        this.headerContainer = null;\r\n        this.bodyContainer = null;\r\n        this.labelContainer = null;\r\n        this.labelDiv = null;\r\n        this.canvasContainer = null;\r\n        this.ctx = null;\r\n        this.alignmentPosition = null;\r\n        this.baseWidth = 0;\r\n        this.seqLength = 0;\r\n\r\n        // sortable and highlight\r\n        this.orderedAlignments = null;\r\n        this.highlightedIndicies = null;\r\n\r\n        // conserved region mode\r\n        this.isConservedRegionMode = false;\r\n        this.conservedRegionBooleanArr = null;\r\n        this.conservedRegionLength = 0;\r\n\r\n\r\n        // seqLog & 1 - gapRate\r\n        this.headerCanvas = null;\r\n        this.headerCtx = null;\r\n        this.seqStat = null;\r\n        this.gapRate = null;\r\n        this.shannonEntropyArr = null;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {string} elementID without # \r\n     */\r\n    setContainer(elementID) {\r\n        this.container = utils.selectID(elementID);\r\n        this.container.html(\"\");\r\n        this.options.id = elementID;\r\n        if (!this.options.setSize) {\r\n            this.width = this.container.elements[0].clientWidth;\r\n            this.height = this.container.elements[0].clientHeight;\r\n        } else {\r\n            this.height = this.options.height;\r\n            this.width = this.options.width;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {json} json \r\n     */\r\n    setJson(json) {\r\n        this.inputJson = json;\r\n        this.numSeq = json[\"sequences\"].length;\r\n        this.canvasHeight = this.numSeq * this.options.seqHeight + 50;\r\n        this.seqLength = this.inputJson[\"sequences\"][0][\"seq\"].length;\r\n        this.alignmentPosition = new AlignmentPosition(this.seqLength);\r\n        this.seqStat = utils.seqStat(this.inputJson[\"sequences\"]);\r\n        this.conservedRegionBooleanArr = utils.isConservedRegoin(this.seqStat);\r\n        this.conservedRegionLength = utils.conservedRegionLength(this.seqStat);\r\n        this.gapRate = utils.calcGapRate(this.seqStat, this.numSeq);\r\n        this.shannonEntropyArr = utils.calcShannonEntropy(this.seqStat, this.numSeq);\r\n\r\n        // grouping\r\n        if (this.options.isGrouping) {\r\n            this.group = getGroup(this.inputJson[\"sequences\"]);\r\n            let counter = 0;\r\n            for (const key in this.group) {\r\n                const name = key;\r\n                utils.each(this.inputJson[\"sequences\"], (val) => {\r\n                    if (val.group === key) {\r\n                        val.order = counter++;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        this.orderedAlignments = new Array(this.inputJson[\"sequences\"].length);\r\n        utils.each(this.inputJson[\"sequences\"], (alignment) => {\r\n            this.orderedAlignments[alignment.order] = alignment;\r\n        })\r\n    }\r\n\r\n    render() {\r\n        this._DOMcreate();\r\n        this.ctx = this.mainCanvas.elements[0].getContext(\"2d\");\r\n\r\n        this._initHeader();\r\n        this._drawSequenceLabel();\r\n        this.drawSequences();\r\n    }\r\n\r\n    zoomInShowSequence() {\r\n        if (this.alignmentPosition.end - this.alignmentPosition.start < 20) return;\r\n        this.alignmentPosition.preStart = this.alignmentPosition.start;\r\n        this.alignmentPosition.preEnd = this.alignmentPosition.end;\r\n        this.alignmentPosition.start = 0;\r\n        this.alignmentPosition.end = 30;\r\n        this.drawSequences();\r\n    }\r\n\r\n    change2conservedRegion() {\r\n        this.isConservedRegionMode = true;\r\n        this.alignmentPosition.update(this.conservedRegionLength);\r\n        this.drawSequences();\r\n    }\r\n\r\n    change2allRegion() {\r\n        this.isConservedRegionMode = false;\r\n        this.alignmentPosition.update(this.seqLength);\r\n        this.drawSequences();\r\n    }\r\n\r\n    saveRawJson() {\r\n        utils.exportJson(this.inputJson, `all_rawJson_${this.id}.json`);\r\n    }\r\n\r\n    saveAllSequence() {\r\n        utils.exportText(utils.getAllSequenceAsFasta(this.inputJson[\"sequences\"]), `all_alignments_${this.id}.fas`);\r\n    }\r\n\r\n    saveConservedRegion() {\r\n        utils.exportText(utils.getConservedRegionAsFasta(this.inputJson[\"sequences\"], this.conservedRegionBooleanArr), `conservedRegion_alignments_${this.id}.fas`);\r\n    }\r\n\r\n    saveVisualizedRegion() {\r\n        if (this.isConservedRegionMode) {\r\n            const seqs = []\r\n            utils.each(this.inputJson[\"sequences\"], (val) => {\r\n                const conservedSeq = utils.getTrueArr(val.seq.split(\"\"), this.conservedRegionBooleanArr);\r\n                const targetSeq = conservedSeq.slice(parseInt(this.alignmentPosition.start + 0.5), parseInt(this.alignmentPosition.end + 0.5)).join(\"\");\r\n                seqs.push({\r\n                    name: val.name,\r\n                    seq: targetSeq\r\n                });\r\n            });\r\n            utils.exportText(utils.getAllSequenceAsFasta(seqs), `visualizedRegion_conserved_${this.id}.fas`);\r\n\r\n        } else {\r\n            const seqs = [];\r\n            utils.each(this.inputJson[\"sequences\"], (val) => {\r\n                const targetSeq = val.seq.substr(parseInt(this.alignmentPosition.start + 0.5), parseInt(this.alignmentPosition.end + 0.5) - parseInt(this.alignmentPosition.start + 0.5));\r\n                seqs.push({\r\n                    name: val.name,\r\n                    seq: targetSeq\r\n                });\r\n            });\r\n            utils.exportText(utils.getAllSequenceAsFasta(seqs), `visualizedRegion_${this.id}.fas`);\r\n        }\r\n    }\r\n\r\n\r\n    _DOMcreate() {\r\n        this.options.sequence.width = this.width - this.options.label.width - this.options.label.left - this.options.sequence.left - this.options.sequence.right;\r\n\r\n        this.headerContainer = this.container.create(\"div\")\r\n            .setID(`${this.options.id}_header`)\r\n        //    .html(\"Alignment Viewer Header\");\r\n\r\n        this.bodyContainer = this.container.create(\"div\")\r\n            .setID(`${this.options.id}_body`)\r\n            .style(\"position\", \"relative\")\r\n            .setClass(\"d-flex flex-row\")\r\n\r\n        this.canvasContainer = this.bodyContainer.create(\"div\")\r\n            .setID(`${this.options.id}_canvasContainer`)\r\n            .style(\"position\", \"relative\")\r\n            .style(\"height\", `${this.canvasHeight}px`);\r\n\r\n        this.labelContainer = this.bodyContainer.create(\"div\")\r\n            .setID(`${this.options.id}_label`)\r\n            //.style(\"position\", \"absolute\")\r\n            //.style(\"height\", `${this.canvasHeight}px`)\r\n            //.style(\"width\", `${this.options.label.width}px`)\r\n            .style(\"margin-left\", `${this.options.label.left}px`)\r\n            .style(\"margin-top\", (this.options.label.top + this.options.scaleBar.height) + \"px\")\r\n\r\n        this.mainCanvas = this.canvasContainer.create(\"canvas\")\r\n            .setID(`${this.options.id}_canvas`)\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"left\", (this.options.label.width + this.options.label.left) + \"px\")\r\n            .style(\"top\", this.options.sequence.top + \"px\")\r\n            .attr(\"height\", this.canvasHeight)\r\n            .attr(\"width\", this.width - this.options.label.width - this.options.label.left);\r\n\r\n        this.mainCanvas\r\n            .on(\"mousemove\", () => {\r\n                event.preventDefault();\r\n                if (this.isDragging) {\r\n                    this._move(event.movementX / window.devicePixelRatio);\r\n                }\r\n            })\r\n            .on(\"mousewheel\", () => {\r\n                event.preventDefault();\r\n                if (event.deltaY > 0) {\r\n                    this._zoomOut();\r\n                } else if (event.deltaY < 0) {\r\n                    this._zoomIn();\r\n                }\r\n            })\r\n            .on(\"mousedown\", () => {\r\n                event.preventDefault();\r\n                // 0: left button, 1: wheel, 2: right\r\n                if (event.button == 0) {\r\n                    this.isDragging = true;\r\n                }\r\n            })\r\n            .on(\"mouseup\", () => {\r\n                event.preventDefault();\r\n                // 0: left button, 1: wheel, 2: right\r\n                if (event.button == 0) {\r\n                    this.isDragging = false;\r\n\r\n                }\r\n            })\r\n            .on(\"mouseout\", () => {\r\n                this.isDragging = false;\r\n            })\r\n            .on(\"dblclick\", () => {\r\n                this._resetZoom();\r\n            });\r\n    }\r\n\r\n    /*    _sortAlignments(newIndex, oldIndex) {\r\n            const target = this.orderedAlignments[oldIndex]\r\n            this.orderedAlignments.splice(oldIndex, 1);\r\n            this.orderedAlignments.splice(newIndex, 0, target);\r\n            this._drawSequences();\r\n        }\r\n    */\r\n\r\n    _initHeader() {\r\n        if (this.options.header.enable) {\r\n            this.headerCanvas = this.headerContainer\r\n                .style(\"position\", \"relative\")\r\n                .style(\"height\", this.options.header.height + 2 + \"px\")\r\n                .create(\"canvas\")\r\n                .attr(\"height\", this.options.header.height + 2 + \"px\")\r\n                .attr(\"width\", this.width)\r\n                .style(\"position\", \"absolute\");\r\n            this.headerCtx = this.headerCanvas.elements[0].getContext(\"2d\");\r\n            this.options.header.left = this.options.sequence.left + this.options.label.width + this.options.label.left + this.options.label.right;\r\n        }\r\n    }\r\n\r\n\r\n    _updateSortInfo(sortable) {\r\n        const sortArr = sortable.toArray();\r\n        utils.each(this.inputJson[\"sequences\"], (val) => {\r\n            val.order = sortArr.indexOf(val.name)\r\n        });\r\n        this.drawSequences();\r\n    }\r\n\r\n    drawSequences() {\r\n        drawer.clear(this.ctx, this.width, this.canvasHeight);\r\n        const seqWidth = this.options.seqHeight - this.options.sequence.topMargin - this.options.sequence.bottomMargin;\r\n        drawer.setLineWidth(this.ctx, seqWidth);\r\n        drawer.setTextAlign(this.ctx, \"center\");\r\n\r\n        utils.each(this.inputJson[\"sequences\"], (val) => {\r\n            this._drawSequence(val);\r\n        });\r\n\r\n        this._drawHighlightRect();\r\n        this._drawScaleBar();\r\n        this._drawHeader();\r\n\r\n    }\r\n\r\n    _drawSequence(alignment) {\r\n        const seqWidth = this.options.seqHeight - this.options.sequence.topMargin - this.options.sequence.bottomMargin;\r\n        const y = this.options.scaleBar.height + this.options.seqHeight * (alignment.order + 1) + this.options.sequence.topMargin - seqWidth / 2;\r\n        let seq = [];\r\n        if (this.isConservedRegionMode) {\r\n            const conservedSeq = utils.getTrueArr(alignment[\"seq\"].split(\"\"), this.conservedRegionBooleanArr);\r\n            seq = conservedSeq.slice(parseInt(this.alignmentPosition.start + 0.5), parseInt(this.alignmentPosition.end + 0.5));\r\n        } else {\r\n            seq = alignment[\"seq\"].substr(parseInt(this.alignmentPosition.start + 0.5), parseInt(this.alignmentPosition.end + 0.5) - parseInt(this.alignmentPosition.start + 0.5)).split(\"\");\r\n        }\r\n        if (seq.length == 0) return;\r\n        let seqLength = seq.length;\r\n        //        if (seq.length < 10) seqLength = 10;\r\n        this.baseWidth = (this.options.sequence.width) / seqLength;\r\n\r\n        drawer.setFillStyle(this.ctx, \"black\");\r\n        this.ctx.font = this.options.sequence.fontSize + \"px Arial serif\";\r\n\r\n        if (this.baseWidth < 10) {\r\n            utils.each(seq, (val, i) => {\r\n                drawer.drawLine(this.ctx, this.options.sequence.left + i * this.baseWidth, this.options.sequence.left + (i + 1) * this.baseWidth, y, y, this.options.colorScheme[val]);\r\n            });\r\n        } else {\r\n            utils.each(seq, (val, i) => {\r\n                drawer.drawLine(this.ctx, this.options.sequence.left + i * this.baseWidth, this.options.sequence.left + (i + 1) * this.baseWidth, y, y, this.options.colorScheme[val]);\r\n                this.ctx.fillText(val, this.options.sequence.left + (i * this.baseWidth) + this.baseWidth / 2, y + this.options.sequence.fontSize * 0.33);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    _drawSequenceLabel() {\r\n        utils.each(this.orderedAlignments, (alignment, i) => {\r\n            const y = this.options.seqHeight * (i + 1);\r\n            this.labelDiv = this.labelContainer.create(\"div\")\r\n                //.style(\"position\", \"absolute\")\r\n                //.style(\"top\", y + \"px\")\r\n                .attr(\"data-id\", alignment.name)\r\n                .style(\"font-size\", this.options.label.fontSize + \"px\")\r\n                .style(\"color\", this.group[alignment[\"group\"]].col)\r\n                .style(\"height\", this.options.seqHeight + \"px\")\r\n\r\n            const label_p = this.labelDiv.create(\"p\").style(\"margin\", \"0\")\r\n                .style(\"height\", this.options.seqHeight + \"px\");\r\n            label_p.create(\"span\")\r\n                .setClass(\"handle fas fa-expand-arrows-alt\")\r\n                .html(\" \")\r\n\r\n            label_p.elements[0].innerHTML += (alignment.name + \"_\" + alignment[\"group\"]);\r\n        });\r\n    }\r\n\r\n    _drawHighlightRect() {\r\n        utils.each(this.highlightedIndicies, (val) => {\r\n            const i = val.index;\r\n            const y = this.options.scaleBar.height + this.options.seqHeight * (i) + this.options.sequence.topMargin;\r\n            drawer.drawRect(this.ctx, this.options.sequence.left, y, this.options.sequence.width, this.options.seqHeight, \"red\", 3);\r\n        });\r\n    }\r\n\r\n    _drawScaleBar() {\r\n        if (this.options.scaleBar.enable) {\r\n            drawer.setLineWidth(this.ctx, 1.5);\r\n\r\n            const s = this.alignmentPosition.start\r\n            const e = this.alignmentPosition.end\r\n            const size = e - s;\r\n\r\n            let numBreaks = this.options.sequence.width > 500 ? 10 : 5;\r\n            let stepSize = parseInt(size / numBreaks);\r\n            numBreaks = parseInt(size / stepSize);\r\n\r\n            if (size < 30 && this.baseWidth > 20) {\r\n                numBreaks = size;\r\n                stepSize = 1;\r\n            }\r\n            let startX = this.options.sequence.left;\r\n            let startY = this.options.scaleBar.height - this.options.scaleBar.fontSize / 2;\r\n\r\n            for (let i = 0; i < numBreaks; i++) {\r\n                startX = this.options.sequence.left + i * stepSize * this.baseWidth + this.baseWidth / 2;\r\n                drawer.drawTxt(this.ctx, parseInt(s + i * stepSize + 0.5 + 1), startX, startY, this.options.scaleBar.fontSize + \"px Arial serif\");\r\n                drawer.drawLine(this.ctx, startX, startX, this.options.scaleBar.height, startY + 1, \"grey\");\r\n            }\r\n            if (stepSize !== 1) {\r\n                startX = this.options.sequence.left + parseInt(size + 0.5) * this.baseWidth - this.baseWidth / 2;\r\n                drawer.drawTxt(this.ctx, parseInt(e), startX, startY, this.options.scaleBar.fontSize + \"px Arial serif\");\r\n                drawer.drawLine(this.ctx, startX, startX, this.options.scaleBar.height, startY + 1, \"grey\");\r\n            }\r\n        }\r\n    }\r\n\r\n    _drawHeader() {\r\n        if (this.options.header.enable) {\r\n            const leftMergin = 10;\r\n            drawer.clear(this.headerCtx, this.width, this.options.header.height);\r\n            this._drawNonGrapRate();\r\n            this._drawSeqLogo();\r\n\r\n            drawer.setLineWidth(this.headerCtx, 1);\r\n            drawer.setStrokeStyle(this.headerCtx, \"black\");\r\n            const startX = this.options.header.left;\r\n            const startY = this.options.header.top;\r\n            drawer.drawLine(this.headerCtx, startX - leftMergin, startX - leftMergin, this.options.header.height + 1, startY);\r\n            drawer.drawLine(this.headerCtx, this.width - 1, this.width - 1, this.options.header.height + 1, startY);\r\n            drawer.drawLine(this.headerCtx, startX - leftMergin, this.width, startY, startY);\r\n            drawer.drawLine(this.headerCtx, startX - leftMergin, this.width, this.options.header.height + 1, this.options.header.height + 1);\r\n        }\r\n    }\r\n\r\n    _drawSeqLogo() {\r\n        if (this.options.seqLogo.enable && this.baseWidth > 10) {\r\n            // draw Y axis\r\n            drawer.setTextAlign(this.headerCtx, \"center\");\r\n            drawer.setFillStyle(this.headerCtx, \"black\");\r\n\r\n            this.headerCtx.rotate(Math.PI * 3 / 2);\r\n            drawer.drawTxt(this.headerCtx, \"bits\", -(this.options.header.height / 2), this.options.header.left - 35, \"14px sans-serif\")\r\n            this.headerCtx.rotate(Math.PI * 1 / 2);\r\n            drawer.setTextAlign(this.headerCtx, \"right\");\r\n            drawer.drawTxt(this.headerCtx, \"0\", this.options.header.left - 14, this.options.header.height, \"12px sans-serif\")\r\n            drawer.drawTxt(this.headerCtx, \"4.5\", this.options.header.left - 14, this.options.header.top + 6, \"12px sans-serif\")\r\n\r\n            drawer.setLineWidth(this.headerCtx, 1);\r\n            drawer.setTextAlign(this.headerCtx, \"center\");\r\n\r\n            this.headerCtx.font = '900 ' + 30 * (this.options.header.height - this.options.header.top) / 100 + 'px \"Arial Black\", Arial, Gadget, sans-serif';\r\n            const maxVal = Math.log2(22);\r\n            const logoHeight = this.options.header.height - this.options.header.top - 1;\r\n            const baseHeight = logoHeight / maxVal;\r\n\r\n            const startX = this.options.header.left;\r\n            const startY = this.options.header.top + 1;\r\n\r\n            const wSize = this.baseWidth;\r\n\r\n            let entropies = [];\r\n            if (this.isConservedRegionMode) {\r\n                entropies = utils.getTrueArr(this.shannonEntropyArr, this.conservedRegionBooleanArr);\r\n            } else {\r\n                entropies = this.shannonEntropyArr;\r\n            }\r\n\r\n            utils.each(entropies, (site, i) => {\r\n                if (i >= parseInt(this.alignmentPosition.start + 0.5) && i <= parseInt(this.alignmentPosition.end + 0.5 - 1)) {\r\n                    const buf = utils.filterAndSortEntroy(site);\r\n                    let preHeight = logoHeight * (1 - buf[\"sum\"] / maxVal);\r\n\r\n                    utils.each(buf[\"res\"], (val) => {\r\n                        const text = val.name.replace(\"-\", \"\\\\\");\r\n\r\n                        let height = (logoHeight) * val.value / maxVal;\r\n                        let hRate = height / baseHeight;\r\n\r\n                        this.headerCtx.transform(1, 0, 0, hRate, startX + wSize / 2 + wSize * (i - parseInt(this.alignmentPosition.start + 0.5)), startY + height + preHeight);\r\n                        this.headerCtx.fillStyle = utils.TAYLOR_COLOR[text];\r\n                        this.headerCtx.fillText(text, 0, 0, wSize);\r\n                        this.headerCtx.setTransform(1, 0, 0, 1, 0, 0);\r\n                        preHeight = height + preHeight;\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  draw 1 - gap rate\r\n     */\r\n    _drawNonGrapRate() {\r\n        if (this.options.nonGapRate.enable && this.baseWidth <= 10 && !this.isConservedRegionMode) {\r\n            drawer.setTextAlign(this.headerCtx, \"center\");\r\n            drawer.setFillStyle(this.headerCtx, \"black\");\r\n\r\n            // draw Y axis\r\n            this.headerCtx.rotate(Math.PI * 3 / 2);\r\n            drawer.drawTxt(this.headerCtx, \"1 - gap rate\", -(this.options.header.height / 2), this.options.header.left - 35, \"14px sans-serif\")\r\n            this.headerCtx.rotate(Math.PI * 1 / 2);\r\n            drawer.setTextAlign(this.headerCtx, \"right\");\r\n            drawer.drawTxt(this.headerCtx, \"0\", this.options.header.left - 14, this.options.header.height, \"12px sans-serif\")\r\n            drawer.drawTxt(this.headerCtx, \"1\", this.options.header.left - 14, this.options.header.top + 6, \"12px sans-serif\")\r\n\r\n            drawer.setTextAlign(this.headerCtx, \"center\");\r\n            drawer.setLineWidth(this.headerCtx, this.baseWidth);\r\n\r\n            const bottomLineY = this.options.header.height;\r\n            const maxVal = this.options.header.height - this.options.header.top - 1;\r\n            utils.each(this.gapRate, (val, i) => {\r\n                if (i >= parseInt(this.alignmentPosition.start + 0.5) && i <= parseInt(this.alignmentPosition.end + 0.5 - 1)) {\r\n                    const x = this.options.header.left + (i - parseInt(this.alignmentPosition.start + 0.5)) * this.baseWidth + this.baseWidth * 0.5;\r\n                    drawer.drawLine(this.headerCtx, x, x, bottomLineY, bottomLineY - maxVal * (1 - val), (1 - val >= this.options.nonGapRate.th) ? this.options.nonGapRate.highColor : this.options.nonGapRate.baseColor);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    // zoom functions\r\n    _zoomIn() {\r\n        let zoomSize = this.baseWidth < 5 ? 20 : (this.baseWidth < 10 ? 10 : 5);\r\n        if (this.alignmentPosition.end - this.alignmentPosition.start > 30) {\r\n            this.alignmentPosition.start += zoomSize;\r\n            this.alignmentPosition.end -= zoomSize;\r\n            this.drawSequences();\r\n        } else if (this.alignmentPosition.end - this.alignmentPosition.start > 10) {\r\n            this.alignmentPosition.start += 2;\r\n            this.alignmentPosition.end -= 2;\r\n            this.drawSequences();\r\n        } else if (this.alignmentPosition.end - this.alignmentPosition.start > 2) {\r\n            this.alignmentPosition.start += 1;\r\n            this.alignmentPosition.end -= 1;\r\n            this.drawSequences();\r\n        }\r\n    }\r\n\r\n    _zoomOut() {\r\n        if (this.alignmentPosition.end - this.alignmentPosition.start < 30) {\r\n            this.alignmentPosition.start -= 2;\r\n            this.alignmentPosition.end += 2;\r\n\r\n        } else {\r\n            let zoomSize = this.baseWidth < 5 ? 20 : (this.baseWidth < 10 ? 10 : 5);\r\n            if (this.alignmentPosition.start == 0 && this.alignmentPosition.end == this.alignmentPosition.size) return;\r\n            this.alignmentPosition.start -= zoomSize;\r\n            this.alignmentPosition.end += zoomSize;\r\n            if (this.alignmentPosition.start < 0) {\r\n                this.alignmentPosition.start = 0;\r\n            }\r\n            if (this.alignmentPosition.end > this.alignmentPosition.size) {\r\n                this.alignmentPosition.end = this.alignmentPosition.size;\r\n            }\r\n        }\r\n        this.drawSequences();\r\n    }\r\n\r\n    _move(x) {\r\n        if (x === 0) return;\r\n        let moveSize = x / (this.baseWidth);\r\n        this.alignmentPosition.start -= moveSize;\r\n        this.alignmentPosition.end -= moveSize;\r\n        if (this.alignmentPosition.end > this.alignmentPosition.size) {\r\n            this.alignmentPosition.start += moveSize;\r\n            this.alignmentPosition.end = this.alignmentPosition.size;\r\n        }\r\n        if (this.alignmentPosition.start < 0) {\r\n            this.alignmentPosition.start = 0;\r\n            this.alignmentPosition.end += moveSize;\r\n        }\r\n        if (parseInt(this.alignmentPosition.start + 0.5) !== parseInt(this.alignmentPosition.preStart + 0.5) ||\r\n            parseInt(this.alignmentPosition.end - this.alignmentPosition.start + 0.5) !== parseInt(this.alignmentPosition.preEnd - this.alignmentPosition.preStart + 0.5)) {\r\n            this.alignmentPosition.preStart = this.alignmentPosition.start;\r\n            this.alignmentPosition.preEnd = this.alignmentPosition.end;\r\n\r\n            this.drawSequences();\r\n        }\r\n    }\r\n\r\n    _resetZoom() {\r\n        this.alignmentPosition.preStart = this.alignmentPosition.start;\r\n        this.alignmentPosition.preEnd = this.alignmentPosition.end;\r\n        this.alignmentPosition.start = 0;\r\n        this.alignmentPosition.end = this.alignmentPosition.size;\r\n        this.drawSequences();\r\n    }\r\n}","//\r\n// my fetch functions\r\n// ref: https://github.com/d3/d3-fetch\r\n\r\nexport const text = (input, init) => {\r\n    return fetch(input, init).then((response) => {\r\n        if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\r\n        return response.text();\r\n    });\r\n}\r\n\r\nexport const json = (input, init) => {\r\n    return fetch(input, init).then((response) => {\r\n        if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\r\n        return response.json();\r\n    });\r\n}"],"names":["key","toString","Object","prototype","hasOwnProperty","has","obj","path","call","nativeKeys","keys","MAX_ARRAY_INDEX","Math","pow","getLength","optimizeCb","func","context","argCount","value","index","collection","console","log","accumulator","apply","arguments","getKeys","type","isObject","push","each","iteratee","i","length","isArrayLike","group","behavior","partition","result","groupBy","countBy","indexBy","seqStat","seqs","results","len","init","seq","val","seqArr","split","isConservedRegoin","conserved","conservedRegionLength","counter","calcGapRate","numSeq","res","calcShannonEntropy","s","v","log2","filterAndSortEntroy","entropyArr","buf","name","sort","a","b","getTrueArr","resourceArr","booleanArr","getAllSequenceAsFasta","sequenceObj","ret","join","getConservedRegionAsFasta","Selector","elements","mouse","eventType","callback","capture","_","this","el","addEventListener","rect","getBoundingClientRect","_this","event","clientX","left","clientLeft","clientY","top","clientTop","elementName","newEle","document","createElement","appendChild","stylName","styleValue","style","setProperty","attrName","attrValue","setAttribute","className","attr","idName","text","textContent","selectID","getElementById","TAYLOR_COLOR","A","R","N","D","C","Q","E","G","H","I","L","K","M","F","P","S","T","W","Y","V","B","X","Z","hsvToRgb","Hp","abs","m","floor","COLER_ARR","k","j","getColorPallet","getColors","stepSize","PROTEIN_COL_V1","generateLink","fileName","dataPath","link","download","href","exportText","textString","blob","Blob","url","window","URL","createObjectURL","click","exportJson","json","replacer","indent","JSON","stringify","Viewer","height","width","mainCanvas","isDragging","size","right","bottom","font","fontSize","options","id","setSize","seqHeight","isGrouping","colorScheme","col","header","enable","seqLogo","nonGapRate","baseColor","highColor","th","label","sequence","topMargin","bottomMargin","scaleBar","setLineWidth","ctx","lineWidth","setTextAlign","align","textAlign","setFillStyle","fStyle","fillStyle","drawLine","startX","endX","startY","endY","strokeStyle","beginPath","moveTo","lineTo","stroke","drawTxt","x","y","fillText","clear","clearRect","AlignmentPosition","start","end","preStart","preEnd","Alignment","opt","container","inputJson","canvasHeight","headerContainer","bodyContainer","labelContainer","labelDiv","canvasContainer","alignmentPosition","baseWidth","seqLength","orderedAlignments","highlightedIndicies","isConservedRegionMode","conservedRegionBooleanArr","headerCanvas","headerCtx","gapRate","shannonEntropyArr","elementID","utils","html","clientWidth","clientHeight","_this2","dicArr","_group","arr","count","names","getGroup","order","Array","alignment","_DOMcreate","getContext","_initHeader","_drawSequenceLabel","drawSequences","update","targetSeq","_this3","slice","parseInt","substr","create","setID","setClass","on","preventDefault","_this4","_move","movementX","devicePixelRatio","deltaY","_zoomOut","_zoomIn","button","_resetZoom","sortable","sortArr","toArray","indexOf","drawer","seqWidth","_this5","_drawSequence","_drawHighlightRect","_drawScaleBar","_drawHeader","_this6","_this7","label_p","innerHTML","_this8","strokeRect","e","numBreaks","_drawNonGrapRate","_drawSeqLogo","sStyle","rotate","PI","maxVal","logoHeight","baseHeight","wSize","entropies","site","_this9","preHeight","replace","hRate","transform","setTransform","bottomLineY","_this10","zoomSize","moveSize","svgElement","svgString","svg","ActiveXObject","xml","XMLSerializer","serializeToString","input","fetch","then","response","ok","Error","status","statusText","querySelector","querySelectorAll","getElementsByClassName"],"mappings":"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"}