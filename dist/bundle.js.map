{"version":3,"file":"bundle.js","sources":["../src/utils/myUnderscore.js","../src/utils/sequence.js","../src/utils/selector.js","../src/utils/fetch.js","../src/utils/color.js","../src/utils/download.js","../src/sequenceAlignment/option.js","../src/utils/canvas.js","../src/sequenceAlignment/multipleSequenceAlignment.js","../src/circularBrowser/option.js","../src/circularBrowser/circularGenomeBrowser.js","../src/linearBrowser/option.js","../src/linearBrowser/linearGenomeBrowser.js"],"sourcesContent":["// almost same functions as underscore.js\r\n// ref: https: //underscorejs.org/docs/underscore.html\r\n\r\nconst ObjProto = Object.prototype,\r\n    toString = ObjProto.toString,\r\n    hasOwnProperty = ObjProto.hasOwnProperty;\r\n\r\nconst has = function (obj, path) {\r\n    return obj != null && hasOwnProperty.call(obj, path);\r\n}\r\n\r\n\r\nconst nativeIsArray = Array.isArray,\r\n    nativeKeys = Object.keys,\r\n    nativeCreate = Object.create;\r\n\r\nconst shallowProperty = function (key) {\r\n    return function (obj) {\r\n        return obj == null ? void 0 : obj[key];\r\n    };\r\n};\r\n\r\nconst MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\nconst getLength = shallowProperty('length');\r\nconst isArrayLike = function (collection) {\r\n    const length = getLength(collection);\r\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\r\n};\r\n\r\nconst optimizeCb = function (func, context, argCount) {\r\n    if (context === void 0) return func;\r\n    switch (argCount == null ? 3 : argCount) {\r\n        case 1:\r\n            return function (value) {\r\n                return func.call(context, value);\r\n            };\r\n        case 3:\r\n            return function (value, index, collection) {\r\n                console.log(context);\r\n                return func.call(context, value, index, collection);\r\n            };\r\n        case 4:\r\n            return function (accumulator, value, index, collection) {\r\n                return func.call(context, accumulator, value, index, collection);\r\n            };\r\n    }\r\n    return function () {\r\n        return func.apply(context, arguments);\r\n    };\r\n};\r\n\r\nconst isObject = function (obj) {\r\n    var type = typeof obj;\r\n    return type === 'function' || type === 'object' && !!obj;\r\n};\r\n\r\nconst getKeys = function (obj) {\r\n    if (!isObject(obj)) return [];\r\n    if (nativeKeys) return nativeKeys(obj);\r\n    var keys = [];\r\n    for (var key in obj)\r\n        if (has(obj, key)) keys.push(key);\r\n\r\n    return keys;\r\n};\r\n\r\n\r\nexport const each = function (obj, iteratee, context) {\r\n    iteratee = optimizeCb(iteratee, context);\r\n    var i, length;\r\n    if (isArrayLike(obj)) {\r\n        for (i = 0, length = obj.length; i < length; i++) {\r\n            iteratee(obj[i], i, obj);\r\n        }\r\n    } else {\r\n        const keys = getKeys(obj);\r\n        for (i = 0, length = keys.length; i < length; i++) {\r\n            iteratee(obj[keys[i]], keys[i], obj);\r\n        }\r\n    }\r\n    return obj;\r\n};\r\n\r\nconst group = function (behavior, partition) {\r\n    return function (obj, iteratee, context) {\r\n        var result = partition ? [\r\n            [],\r\n            []\r\n        ] : {};\r\n        iteratee = optimizeCb(iteratee, context);\r\n        each(obj, function (value, index) {\r\n            var key = iteratee(value, index, obj);\r\n            behavior(result, value, key);\r\n        });\r\n        return result;\r\n    };\r\n};\r\n\r\nexport const groupBy = group(function (result, value, key) {\r\n    if (has(result, key)) result[key].push(value);\r\n    else result[key] = [value];\r\n\r\n});\r\n\r\nexport const countBy = group(function (result, value, key) {\r\n    if (has(result, key)) result[key]++;\r\n    else result[key] = 1;\r\n});\r\n\r\nexport const indexBy = group(function (result, value, key) {\r\n    result[key] = value;\r\n});","import {\r\n    each\r\n} from \"./myUnderscore\"\r\n\r\nconst seqGroup = function (behavior, numSeq) {\r\n    return function (obj, iteratee, context) {\r\n        var result = partition ? [\r\n            [],\r\n            []\r\n        ] : {};\r\n        iteratee = optimizeCb(iteratee, context);\r\n        each(obj, function (value, index) {\r\n            var key = iteratee(value, index, obj);\r\n            behavior(result, value, key);\r\n        });\r\n        return result;\r\n    };\r\n}\r\n\r\n\r\nexport const seqStat = (seqs) => {\r\n    const results = [];\r\n    const init = (len) => {\r\n        for (let i = 0; i < len; i++) {\r\n            results.push({});\r\n        }\r\n    }\r\n    const others = (seq) => {\r\n        const seqArr = seq.split(\"\");\r\n        each(seqArr, (val, i) => {\r\n            if (val in results[i]) results[i][val]++;\r\n            else results[i][val] = 1;\r\n        });\r\n    }\r\n\r\n    init(seqs[0].seq.length);\r\n    each(seqs, (val) => {\r\n        others(val.seq);\r\n    });\r\n\r\n    return results\r\n}\r\n\r\nexport const isConservedRegoin = (seqArr) => {\r\n    const conserved = []\r\n    each(seqArr, (val) => {\r\n        if (val.hasOwnProperty(\"-\")) {\r\n            conserved.push(false);\r\n        } else {\r\n            conserved.push(true);\r\n        }\r\n    });\r\n    return conserved;\r\n}\r\n\r\nexport const conservedRegionLength = (seqArr) => {\r\n    let counter = 0;\r\n    each(seqArr, (val) => {\r\n        if (!val.hasOwnProperty(\"-\")) {\r\n            counter++;\r\n        }\r\n    });\r\n    return counter;\r\n}\r\n\r\nexport const calcGapRate = (seqArr, numSeq) => {\r\n    let res = [];\r\n    each(seqArr, (val) => {\r\n        if (val.hasOwnProperty(\"-\")) {\r\n            res.push(val[\"-\"] / numSeq);\r\n        } else res.push(0);\r\n    });\r\n    return res;\r\n}\r\n\r\nexport const calcShannonEntropy = (seqArr, numSeq) => {\r\n    const results = [];\r\n    each(seqArr, (seqs) => {\r\n        const res = {}\r\n        let s = 0;\r\n        each(seqs, (val, key) => {\r\n            const v = -1 * val / numSeq * Math.log2(val / numSeq);\r\n            res[key] = v;\r\n            s += v;\r\n        })\r\n        res[\"Entropy\"] = Math.log2(22) - s;\r\n        each(res, (val, key) => {\r\n            if (key !== \"Entropy\") {\r\n                res[key] = res[\"Entropy\"] * seqs[key] / numSeq;\r\n            }\r\n        });\r\n        results.push(res);\r\n    });\r\n    return results;\r\n}\r\n/**\r\n * return {sum: totalHeight, res: {name: letter, value: letterHeight}}\r\n * @param {*} entropyArr \r\n */\r\nexport const filterAndSortEntroy = (entropyArr) => {\r\n    const res = [];\r\n    const buf = {}\r\n    let s = 0;\r\n    each(entropyArr, (val, key) => {\r\n        if (val > 0.1 && key !== \"Entropy\") {\r\n            res.push({\r\n                name: key,\r\n                value: val\r\n            });\r\n            s += val;\r\n        }\r\n    });\r\n    res.sort((a, b) => {\r\n        return b.value - a.value;\r\n    })\r\n    buf[\"sum\"] = s;\r\n    buf[\"res\"] = res;\r\n    return buf;\r\n}\r\n\r\nexport const getTrueArr = (resourceArr, booleanArr) => {\r\n    const res = [];\r\n    if (resourceArr.length !== booleanArr.length) {\r\n        console.log(\"not match: \" + resourceArr.length + \" \" + booleanArr.length);\r\n        return res;\r\n    }\r\n    each(resourceArr, (val, i) => {\r\n        if (booleanArr[i]) res.push(val);\r\n    });\r\n    return res;\r\n}\r\n\r\nexport const getAllSequenceAsFasta = (sequenceObj) => {\r\n    const ret = [];\r\n    each(sequenceObj, (val) => {\r\n        ret.push(\">\" + val.name);\r\n        ret.push(val.seq);\r\n    })\r\n    const result = ret.join(\"\\n\");\r\n    return result;\r\n}\r\n\r\nexport const getConservedRegionAsFasta = (sequenceObj, booleanArr) => {\r\n    const ret = [];\r\n    each(sequenceObj, (val) => {\r\n        const seqArr = getTrueArr(val.seq.split(\"\"), booleanArr);\r\n        ret.push(\">\" + val.name);\r\n        ret.push(seqArr.join(\"\"));\r\n    })\r\n    const result = ret.join(\"\\n\");\r\n    return result;\r\n}","import * as _ from \"./myUnderscore.js\";\r\n\r\n/**\r\n * faster than select;\r\n * @param {string} elements id\r\n */\r\nclass Selector {\r\n    constructor(elements) {\r\n        this.elements = elements;\r\n        this.mouse = null;\r\n    }\r\n\r\n    on(eventType, callback, context, capture = false) {\r\n        _.each(this.elements, (el) => {\r\n            el.addEventListener(eventType, () => {\r\n                const rect = el.getBoundingClientRect();\r\n                this.mouse = [event.clientX - rect.left - el.clientLeft, event.clientY - rect.top - el.clientTop];\r\n                callback.call(context);\r\n                this.mouse = null;\r\n            }, capture);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    create(elementName) {\r\n        const elements = [];\r\n        _.each(this.elements, (el) => {\r\n            const newEle = document.createElement(elementName);\r\n            el.appendChild(newEle);\r\n            elements.push(newEle);\r\n        });\r\n        return new Selector(elements);\r\n    }\r\n\r\n    style(stylName, styleValue) {\r\n        _.each(this.elements, (el) => {\r\n            el.style.setProperty(stylName, styleValue);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    attr(attrName, attrValue) {\r\n        _.each(this.elements, (el) => {\r\n            el.setAttribute(attrName, attrValue);\r\n        });\r\n        return this;\r\n    }\r\n\r\n    setClass(className) {\r\n        return this.attr(\"class\", className);\r\n    }\r\n\r\n    setID(idName) {\r\n        return this.attr(\"id\", idName);\r\n    }\r\n\r\n    html(text) {\r\n        if (arguments.length == 1) {\r\n            if (text) {\r\n                _.each(this.elements, (el) => {\r\n                    el.textContent = text;\r\n                });\r\n            } else {\r\n                _.each(this.elements, (el) => {\r\n                    el.textContent = text;\r\n                });\r\n                return this;\r\n            }\r\n        } else {\r\n            const res = []\r\n            _.each(this.elements, (el) => {\r\n                res.push(el.textContent);\r\n            });\r\n            if (res.length === 1) return res[0];\r\n            return res;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * faster than select;\r\n * @param {string} idName ID name\r\n */\r\nexport const selectID = (idName) => {\r\n    return new Selector([document.getElementById(idName)]);\r\n}\r\n\r\n/**\r\n * faster than select;\r\n * @param {string} className class name\r\n */\r\nexport const selectClass = (className) => {\r\n    return new Selector([document.getElementsByClassName(className)]);\r\n}\r\n\r\n/**\r\n * selectID or selectClass is much fast;\r\n * @param {string} name css name\r\n */\r\nexport const select = (name) => {\r\n    return new Selector(\r\n        [document.querySelector(name)]\r\n    );\r\n}\r\n\r\n/**\r\n * selectID or selectClass is much fast;\r\n * @param {string} name css name\r\n */\r\nexport const selectAll = (name) => {\r\n    return new Selector(document.querySelectorAll(name));\r\n}","//\r\n// my fetch functions\r\n// ref: https://github.com/d3/d3-fetch\r\n\r\nexport const text = (input, init) => {\r\n    return fetch(input, init).then((response) => {\r\n        if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\r\n        return response.text();\r\n    });\r\n}\r\n\r\nexport const json = (input, init) => {\r\n    return fetch(input, init).then((response) => {\r\n        if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\r\n        return response.json();\r\n    });\r\n}","// colors: https://github.com/wilzbach/msa-colorschemes/tree/master/src\r\nexport const CLUSTAL2_COLOR = {\r\n    A: \"#80a0f0\",\r\n    R: \"#f01505\",\r\n    N: \"#00ff00\",\r\n    D: \"#c048c0\",\r\n    C: \"#f08080\",\r\n    Q: \"#00ff00\",\r\n    E: \"#c048c0\",\r\n    G: \"#f09048\",\r\n    H: \"#15a4a4\",\r\n    I: \"#80a0f0\",\r\n    L: \"#80a0f0\",\r\n    K: \"#f01505\",\r\n    M: \"#80a0f0\",\r\n    F: \"#80a0f0\",\r\n    P: \"#ffff00\",\r\n    S: \"#00ff00\",\r\n    T: \"#00ff00\",\r\n    W: \"#80a0f0\",\r\n    Y: \"#15a4a4\",\r\n    V: \"#80a0f0\",\r\n    B: \"#fff\",\r\n    X: \"#fff\",\r\n    Z: \"#fff\",\r\n    \"-\": \"rgb(200,200,200)\",\r\n    \"\\\\\": \"rgb(200,200,200)\"\r\n}\r\n\r\nexport const STRAND_COLOR = {\r\n    A: \"#5858a7\",\r\n    R: \"#6b6b94\",\r\n    N: \"#64649b\",\r\n    D: \"#2121de\",\r\n    C: \"#9d9d62\",\r\n    Q: \"#8c8c73\",\r\n    E: \"#0000ff\",\r\n    G: \"#4949b6\",\r\n    H: \"#60609f\",\r\n    I: \"#ecec13\",\r\n    L: \"#b2b24d\",\r\n    K: \"#4747b8\",\r\n    M: \"#82827d\",\r\n    F: \"#c2c23d\",\r\n    P: \"#2323dc\",\r\n    S: \"#4949b6\",\r\n    T: \"#9d9d62\",\r\n    W: \"#c0c03f\",\r\n    Y: \"#d3d32c\",\r\n    V: \"#ffff00\",\r\n    B: \"#4343bc\",\r\n    X: \"#797986\",\r\n    Z: \"#4747b8\",\r\n    \"-\": \"rgb(200,200,200)\",\r\n    \"\\\\\": \"rgb(200,200,200)\"\r\n}\r\nexport const TAYLOR_COLOR = {\r\n    A: \"#ccff00\",\r\n    R: \"#0000ff\",\r\n    N: \"#cc00ff\",\r\n    D: \"#ff0000\",\r\n    C: \"#ffff00\",\r\n    Q: \"#ff00cc\",\r\n    E: \"#ff0066\",\r\n    G: \"#ff9900\",\r\n    H: \"#0066ff\",\r\n    I: \"#66ff00\",\r\n    L: \"#33ff00\",\r\n    K: \"#6600ff\",\r\n    M: \"#00ff00\",\r\n    F: \"#00ff66\",\r\n    P: \"#ffcc00\",\r\n    S: \"#ff3300\",\r\n    T: \"#ff6600\",\r\n    W: \"#00ccff\",\r\n    Y: \"#00ffcc\",\r\n    V: \"#99ff00\",\r\n    B: \"#fff\",\r\n    X: \"#fff\",\r\n    Z: \"#fff\",\r\n    \"-\": \"rgb(200,200,200)\",\r\n    \"\\\\\": \"rgb(200,200,200)\"\r\n}\r\n\r\nconst hsvToRgb = (H, S, V) => {\r\n    // https://qiita.com/hachisukansw/items/633d1bf6baf008e82847\r\n    var C = V * S;\r\n    var Hp = H / 60;\r\n    var X = C * (1 - Math.abs(Hp % 2 - 1));\r\n\r\n    var R, G, B;\r\n    if (0 <= Hp && Hp < 1) {\r\n        [R, G, B] = [C, X, 0]\r\n    } else if (1 <= Hp && Hp < 2) {\r\n        [R, G, B] = [X, C, 0]\r\n    } else if (2 <= Hp && Hp < 3) {\r\n        [R, G, B] = [0, C, X]\r\n    } else if (3 <= Hp && Hp < 4) {\r\n        [R, G, B] = [0, X, C]\r\n    } else if (4 <= Hp && Hp < 5) {\r\n        [R, G, B] = [X, 0, C]\r\n    } else if (5 <= Hp && Hp < 6) {\r\n        [R, G, B] = [C, 0, X]\r\n    }\r\n\r\n    var m = V - C;\r\n    [R, G, B] = [R + m, G + m, B + m];\r\n\r\n    R = Math.floor(R * 255);\r\n    G = Math.floor(G * 255);\r\n    B = Math.floor(B * 255);\r\n    return [R, G, B];\r\n}\r\n\r\nconst COLER_ARR = []\r\nfor (let k = 1; k >= 0.5; k -= 0.1) {\r\n    for (let j = 1; j >= 0.5; j -= 0.25) {\r\n        for (let i = 0; i < 360; i++) {\r\n            COLER_ARR.push(\"rgb(\" + hsvToRgb(i, j, k).join(\",\") + \")\");\r\n        }\r\n    }\r\n}\r\n\r\nconst getColorPallet = (i) => {\r\n    return COLER_ARR[i * 12]\r\n}\r\n\r\nexport const getColors = (i, stepSize) => {\r\n    return COLER_ARR[i * stepSize]\r\n}\r\n\r\nconst PROTEIN_COL_V1 = {}\r\n\r\nPROTEIN_COL_V1[\"A\"] = getColorPallet(0);\r\nPROTEIN_COL_V1[\"B\"] = getColorPallet(1);\r\nPROTEIN_COL_V1[\"C\"] = getColorPallet(2);\r\nPROTEIN_COL_V1[\"D\"] = getColorPallet(3);\r\nPROTEIN_COL_V1[\"E\"] = getColorPallet(4);\r\nPROTEIN_COL_V1[\"F\"] = getColorPallet(5);\r\nPROTEIN_COL_V1[\"G\"] = getColorPallet(6);\r\nPROTEIN_COL_V1[\"H\"] = getColorPallet(7);\r\nPROTEIN_COL_V1[\"I\"] = getColorPallet(8);\r\nPROTEIN_COL_V1[\"J\"] = getColorPallet(9);\r\nPROTEIN_COL_V1[\"K\"] = getColorPallet(10);\r\nPROTEIN_COL_V1[\"L\"] = getColorPallet(11);\r\nPROTEIN_COL_V1[\"M\"] = getColorPallet(12);\r\nPROTEIN_COL_V1[\"N\"] = getColorPallet(13);\r\nPROTEIN_COL_V1[\"O\"] = getColorPallet(14);\r\nPROTEIN_COL_V1[\"P\"] = getColorPallet(15);\r\nPROTEIN_COL_V1[\"Q\"] = getColorPallet(16);\r\nPROTEIN_COL_V1[\"R\"] = getColorPallet(17);\r\nPROTEIN_COL_V1[\"S\"] = getColorPallet(18);\r\nPROTEIN_COL_V1[\"T\"] = getColorPallet(19);\r\nPROTEIN_COL_V1[\"U\"] = getColorPallet(20);\r\nPROTEIN_COL_V1[\"V\"] = getColorPallet(21);\r\nPROTEIN_COL_V1[\"W\"] = getColorPallet(22);\r\nPROTEIN_COL_V1[\"X\"] = getColorPallet(23);\r\nPROTEIN_COL_V1[\"Y\"] = getColorPallet(24);\r\nPROTEIN_COL_V1[\"Z\"] = getColorPallet(25);\r\nPROTEIN_COL_V1[\"-\"] = \"rgb(200,200,200)\";\r\n\r\nexport {\r\n    PROTEIN_COL_V1,\r\n    COLER_ARR\r\n}","// download https://jsgao0.wordpress.com/2016/06/01/export-svg-file-using-xmlserializer/\r\nexport const generateLink = (fileName, dataPath) => {\r\n    var link = document.createElement('a'); // Create a element.\r\n    link.download = fileName; // Set value as the file name of download file.\r\n    link.href = dataPath; // Set value as the file content of download file.\r\n    return link;\r\n}\r\n\r\nexport const exportSVG = (svgElement, fileName) => {\r\n    var svg = svgElement;\r\n    var svgString;\r\n    if (window.ActiveXObject) {\r\n        svgString = svg.xml;\r\n    } else {\r\n        var oSerializer = new XMLSerializer();\r\n        svgString = oSerializer.serializeToString(svg);\r\n    }\r\n    generateLink(fileName + '.svg', 'data:image/svg+xml;utf8,' + svgString).click();\r\n}\r\n\r\nexport const exportText = (textString, fileName) => {\r\n    const blob = new Blob(\r\n        [textString], {\r\n            type: \"type/plain\"\r\n        }\r\n    );\r\n    const url = window.URL.createObjectURL(blob);\r\n    generateLink(fileName, url).click();\r\n}\r\n\r\n// replacer:  https://qiita.com/qoAop/items/57d35a41ef9629351c3c\r\nexport const exportJson = (json, fileName, replacer = null, indent = 4) => {\r\n    const blob = new Blob(\r\n        [JSON.stringify(json, replacer, indent)], {\r\n            type: \"application/json\"\r\n        }\r\n    );\r\n    const url = window.URL.createObjectURL(blob);\r\n    generateLink(fileName, url).click();\r\n}","import * as col from \"../utils/color\"\r\nconst size = {\r\n    width: 0,\r\n    height: 0,\r\n    left: 0,\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n}\r\n\r\nconst font = {\r\n    fontSize: 13\r\n}\r\n\r\nexport const options = {\r\n    id: \"def\",\r\n    setSize: false,\r\n    height: 600,\r\n    width: 600,\r\n    seqHeight: 25,\r\n    isGrouping: true,\r\n    colorScheme: col.TAYLOR_COLOR,\r\n    header: {\r\n        ...size,\r\n        ...font,\r\n        height: 100,\r\n        top: 10,\r\n        enable: true,\r\n    },\r\n    seqLogo: {\r\n        enable: true,\r\n    },\r\n    nonGapRate: {\r\n        enable: true,\r\n        left: 10,\r\n        top: 10,\r\n        bottom: 0,\r\n        baseColor: \"rgb(120,120,120)\",\r\n        highColor: \"rgb(30, 30, 250)\",\r\n        th: 1,\r\n    },\r\n    label: {\r\n        ...size,\r\n        ...font,\r\n        fontSize: 13,\r\n        left: 10,\r\n        top: 0,\r\n        width: 300\r\n    },\r\n    sequence: {\r\n        ...size,\r\n        ...font,\r\n        fontSize: 12,\r\n        left: 10,\r\n        right: 10,\r\n        top: 0,\r\n        width: 480,\r\n        topMargin: 0,\r\n        bottomMargin: 0\r\n    },\r\n    scaleBar: {\r\n        ...font,\r\n        fontSize: 13,\r\n        height: 40,\r\n        enable: true,\r\n    }\r\n}","import * as color from \"./color\"\r\n\r\nconst deg90 = Math.PI / 2\r\n\r\nexport const setLineWidth = (ctx, lineWidth) => {\r\n    ctx.lineWidth = lineWidth\r\n}\r\n\r\nexport const setTextAlign = (ctx, align) => {\r\n    ctx.textAlign = align; // center\r\n}\r\n\r\nexport const setFillStyle = (ctx, fStyle) => {\r\n    ctx.fillStyle = fStyle;\r\n}\r\n\r\nexport const setStrokeStyle = (ctx, sStyle) => {\r\n    ctx.strokeStyle = sStyle;\r\n}\r\n\r\nexport const drawLine = (ctx, startX, endX, startY, endY, strokeStyle) => {\r\n    ctx.beginPath();\r\n    ctx.moveTo(startX, startY);\r\n    ctx.lineTo(endX, endY);\r\n    ctx.strokeStyle = strokeStyle;\r\n    ctx.stroke();\r\n}\r\n\r\nexport const drawRect = (ctx, x, y, width, height, strokeStyle, lineWidth) => {\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = strokeStyle;\r\n    ctx.lineWidth = lineWidth;\r\n    ctx.strokeRect(x, y, width, height);\r\n}\r\n\r\nexport const drawArc = (ctx, x, y, r, startRad, endRad, angle) => {\r\n    let val = angle < 0 ? \"rgba(200,200,200)\" : color.COLER_ARR[angle];\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, r, startRad - deg90, endRad - deg90);\r\n    ctx.strokeStyle = val;\r\n    ctx.stroke();\r\n}\r\n\r\nexport const drawTxt = (ctx, text, x, y, font) => {\r\n    ctx.font = font\r\n    ctx.fillText(text, x, y);\r\n}\r\n\r\nexport const clear = (ctx, width, height) => {\r\n    ctx.clearRect(0, 0, width, height);\r\n}","import {\r\n    options\r\n} from \"./option\";\r\nimport * as drawer from \"../utils/canvas\"\r\n\r\nimport * as utils from \"../utils/index\";\r\n\r\nclass AlignmentPosition {\r\n    constructor(size) {\r\n        this.start = 0;\r\n        this.end = size;\r\n        this.size = size;\r\n        this.preStart = -1;\r\n        this.preEnd = -1;\r\n    }\r\n    update(size) {\r\n        this.start = 0;\r\n        this.end = size;\r\n        this.size = size;\r\n        this.preStart = -1;\r\n        this.preEnd = -1;\r\n    }\r\n}\r\n\r\nconst getGroup = (dicArr) => {\r\n    const _group = {};\r\n    let counter = 0;\r\n    utils.each(dicArr, (val, i, arr) => {\r\n        if (val[\"group\"] in _group) {\r\n            _group[val[\"group\"]].count++;\r\n            _group[val[\"group\"]].names.push(val[\"name\"])\r\n        } else {\r\n            _group[val[\"group\"]] = {\r\n                count: 1,\r\n                col: utils.getColors(counter++, 45),\r\n                names: [val[\"name\"]]\r\n            }\r\n        }\r\n    });\r\n    return _group;\r\n}\r\n\r\n\r\n\r\nexport class Alignment {\r\n    constructor(id, opt) {\r\n        this.height = 500;\r\n        this.width = 500;\r\n        this.mainCanvas = null;\r\n        this.isDragging = false;\r\n\r\n        this.id = id;\r\n        this.container = null;\r\n        this.inputJson = null;\r\n        this.options = {\r\n            ...options,\r\n            ...opt,\r\n        }\r\n\r\n        this.numSeq = 0;\r\n        this.group = null;\r\n\r\n        this.canvasHeight = 0;\r\n        this.headerContainer = null;\r\n        this.bodyContainer = null;\r\n        this.labelContainer = null;\r\n        this.labelDiv = null;\r\n        this.canvasContainer = null;\r\n        this.ctx = null;\r\n        this.alignmentPosition = null;\r\n        this.baseWidth = 0;\r\n        this.seqLength = 0;\r\n\r\n        // sortable and highlight\r\n        this.orderedAlignments = null;\r\n        this.highlightedIndicies = null;\r\n\r\n        // conserved region mode\r\n        this.isConservedRegionMode = false;\r\n        this.conservedRegionBooleanArr = null;\r\n        this.conservedRegionLength = 0;\r\n\r\n\r\n        // seqLog & 1 - gapRate\r\n        this.headerCanvas = null;\r\n        this.headerCtx = null;\r\n        this.seqStat = null;\r\n        this.gapRate = null;\r\n        this.shannonEntropyArr = null;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {string} elementID without # \r\n     */\r\n    setContainer(elementID) {\r\n        this.container = utils.selectID(elementID);\r\n        this.container.html(\"\");\r\n        this.options.id = elementID;\r\n        if (!this.options.setSize) {\r\n            this.width = this.container.elements[0].clientWidth;\r\n            this.height = this.container.elements[0].clientHeight;\r\n        } else {\r\n            this.height = this.options.height;\r\n            this.width = this.options.width;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {json} json \r\n     */\r\n    setJson(json) {\r\n        this.inputJson = json;\r\n        this.numSeq = json[\"sequences\"].length;\r\n        this.canvasHeight = this.numSeq * this.options.seqHeight + 50;\r\n        this.seqLength = this.inputJson[\"sequences\"][0][\"seq\"].length;\r\n        this.alignmentPosition = new AlignmentPosition(this.seqLength);\r\n        this.seqStat = utils.seqStat(this.inputJson[\"sequences\"]);\r\n        this.conservedRegionBooleanArr = utils.isConservedRegoin(this.seqStat);\r\n        this.conservedRegionLength = utils.conservedRegionLength(this.seqStat);\r\n        this.gapRate = utils.calcGapRate(this.seqStat, this.numSeq);\r\n        this.shannonEntropyArr = utils.calcShannonEntropy(this.seqStat, this.numSeq);\r\n\r\n        // grouping\r\n        if (this.options.isGrouping) {\r\n            this.group = getGroup(this.inputJson[\"sequences\"]);\r\n            let counter = 0;\r\n            for (const key in this.group) {\r\n                const name = key;\r\n                utils.each(this.inputJson[\"sequences\"], (val) => {\r\n                    if (val.group === key) {\r\n                        val.order = counter++;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        this.orderedAlignments = new Array(this.inputJson[\"sequences\"].length);\r\n        utils.each(this.inputJson[\"sequences\"], (alignment) => {\r\n            this.orderedAlignments[alignment.order] = alignment;\r\n        })\r\n    }\r\n\r\n    render() {\r\n        this._DOMcreate();\r\n        this.ctx = this.mainCanvas.elements[0].getContext(\"2d\");\r\n\r\n        this._initHeader();\r\n        this._drawSequenceLabel();\r\n        this.drawSequences();\r\n    }\r\n\r\n    zoomInShowSequence() {\r\n        if (this.alignmentPosition.end - this.alignmentPosition.start < 20) return;\r\n        this.alignmentPosition.preStart = this.alignmentPosition.start;\r\n        this.alignmentPosition.preEnd = this.alignmentPosition.end;\r\n        this.alignmentPosition.start = 0;\r\n        this.alignmentPosition.end = 30;\r\n        this.drawSequences();\r\n    }\r\n\r\n    change2conservedRegion() {\r\n        this.isConservedRegionMode = true;\r\n        this.alignmentPosition.update(this.conservedRegionLength);\r\n        this.drawSequences();\r\n    }\r\n\r\n    change2allRegion() {\r\n        this.isConservedRegionMode = false;\r\n        this.alignmentPosition.update(this.seqLength);\r\n        this.drawSequences();\r\n    }\r\n\r\n    saveRawJson() {\r\n        utils.exportJson(this.inputJson, `all_rawJson_${this.id}.json`);\r\n    }\r\n\r\n    saveAllSequence() {\r\n        utils.exportText(utils.getAllSequenceAsFasta(this.inputJson[\"sequences\"]), `all_alignments_${this.id}.fas`);\r\n    }\r\n\r\n    saveConservedRegion() {\r\n        utils.exportText(utils.getConservedRegionAsFasta(this.inputJson[\"sequences\"], this.conservedRegionBooleanArr), `conservedRegion_alignments_${this.id}.fas`);\r\n    }\r\n\r\n    saveVisualizedRegion() {\r\n        if (this.isConservedRegionMode) {\r\n            const seqs = []\r\n            utils.each(this.inputJson[\"sequences\"], (val) => {\r\n                const conservedSeq = utils.getTrueArr(val.seq.split(\"\"), this.conservedRegionBooleanArr);\r\n                const targetSeq = conservedSeq.slice(parseInt(this.alignmentPosition.start + 0.5), parseInt(this.alignmentPosition.end + 0.5)).join(\"\");\r\n                seqs.push({\r\n                    name: val.name,\r\n                    seq: targetSeq\r\n                });\r\n            });\r\n            utils.exportText(utils.getAllSequenceAsFasta(seqs), `visualizedRegion_conserved_${this.id}.fas`);\r\n\r\n        } else {\r\n            const seqs = [];\r\n            utils.each(this.inputJson[\"sequences\"], (val) => {\r\n                const targetSeq = val.seq.substr(parseInt(this.alignmentPosition.start + 0.5), parseInt(this.alignmentPosition.end + 0.5) - parseInt(this.alignmentPosition.start + 0.5));\r\n                seqs.push({\r\n                    name: val.name,\r\n                    seq: targetSeq\r\n                });\r\n            });\r\n            utils.exportText(utils.getAllSequenceAsFasta(seqs), `visualizedRegion_${this.id}.fas`);\r\n        }\r\n    }\r\n\r\n\r\n    _DOMcreate() {\r\n        this.options.sequence.width = this.width - this.options.label.width - this.options.label.left - this.options.sequence.left - this.options.sequence.right;\r\n\r\n        this.headerContainer = this.container.create(\"div\")\r\n            .setID(`${this.options.id}_header`)\r\n        //    .html(\"Alignment Viewer Header\");\r\n\r\n        this.bodyContainer = this.container.create(\"div\")\r\n            .setID(`${this.options.id}_body`)\r\n            .style(\"position\", \"relative\")\r\n            .setClass(\"d-flex flex-row\")\r\n\r\n        this.canvasContainer = this.bodyContainer.create(\"div\")\r\n            .setID(`${this.options.id}_canvasContainer`)\r\n            .style(\"position\", \"relative\")\r\n            .style(\"height\", `${this.canvasHeight}px`);\r\n\r\n        this.labelContainer = this.bodyContainer.create(\"div\")\r\n            .setID(`${this.options.id}_label`)\r\n            //.style(\"position\", \"absolute\")\r\n            //.style(\"height\", `${this.canvasHeight}px`)\r\n            //.style(\"width\", `${this.options.label.width}px`)\r\n            .style(\"margin-left\", `${this.options.label.left}px`)\r\n            .style(\"margin-top\", (this.options.label.top + this.options.scaleBar.height) + \"px\")\r\n\r\n        this.mainCanvas = this.canvasContainer.create(\"canvas\")\r\n            .setID(`${this.options.id}_canvas`)\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"left\", (this.options.label.width + this.options.label.left) + \"px\")\r\n            .style(\"top\", this.options.sequence.top + \"px\")\r\n            .attr(\"height\", this.canvasHeight)\r\n            .attr(\"width\", this.width - this.options.label.width - this.options.label.left);\r\n\r\n        this.mainCanvas\r\n            .on(\"mousemove\", () => {\r\n                event.preventDefault();\r\n                if (this.isDragging) {\r\n                    this._move(event.movementX / window.devicePixelRatio);\r\n                }\r\n            })\r\n            .on(\"mousewheel\", () => {\r\n                event.preventDefault();\r\n                if (event.deltaY > 0) {\r\n                    this._zoomOut();\r\n                } else if (event.deltaY < 0) {\r\n                    this._zoomIn();\r\n                }\r\n            })\r\n            .on(\"mousedown\", () => {\r\n                event.preventDefault();\r\n                // 0: left button, 1: wheel, 2: right\r\n                if (event.button == 0) {\r\n                    this.isDragging = true;\r\n                }\r\n            })\r\n            .on(\"mouseup\", () => {\r\n                event.preventDefault();\r\n                // 0: left button, 1: wheel, 2: right\r\n                if (event.button == 0) {\r\n                    this.isDragging = false;\r\n\r\n                }\r\n            })\r\n            .on(\"mouseout\", () => {\r\n                this.isDragging = false;\r\n            })\r\n            .on(\"dblclick\", () => {\r\n                this._resetZoom();\r\n            });\r\n    }\r\n\r\n    /*    _sortAlignments(newIndex, oldIndex) {\r\n            const target = this.orderedAlignments[oldIndex]\r\n            this.orderedAlignments.splice(oldIndex, 1);\r\n            this.orderedAlignments.splice(newIndex, 0, target);\r\n            this._drawSequences();\r\n        }\r\n    */\r\n\r\n    _initHeader() {\r\n        if (this.options.header.enable) {\r\n            this.headerCanvas = this.headerContainer\r\n                .style(\"position\", \"relative\")\r\n                .style(\"height\", this.options.header.height + 2 + \"px\")\r\n                .create(\"canvas\")\r\n                .attr(\"height\", this.options.header.height + 2 + \"px\")\r\n                .attr(\"width\", this.width)\r\n                .style(\"position\", \"absolute\");\r\n            this.headerCtx = this.headerCanvas.elements[0].getContext(\"2d\");\r\n            this.options.header.left = this.options.sequence.left + this.options.label.width + this.options.label.left + this.options.label.right;\r\n        }\r\n    }\r\n\r\n\r\n    _updateSortInfo(sortable) {\r\n        const sortArr = sortable.toArray();\r\n        utils.each(this.inputJson[\"sequences\"], (val) => {\r\n            val.order = sortArr.indexOf(val.name)\r\n        });\r\n        this.drawSequences();\r\n    }\r\n\r\n    drawSequences() {\r\n        drawer.clear(this.ctx, this.width, this.canvasHeight);\r\n        const seqWidth = this.options.seqHeight - this.options.sequence.topMargin - this.options.sequence.bottomMargin;\r\n        drawer.setLineWidth(this.ctx, seqWidth);\r\n        drawer.setTextAlign(this.ctx, \"center\");\r\n\r\n        utils.each(this.inputJson[\"sequences\"], (val) => {\r\n            this._drawSequence(val);\r\n        });\r\n\r\n        this._drawHighlightRect();\r\n        this._drawScaleBar();\r\n        this._drawHeader();\r\n\r\n    }\r\n\r\n    _drawSequence(alignment) {\r\n        const seqWidth = this.options.seqHeight - this.options.sequence.topMargin - this.options.sequence.bottomMargin;\r\n        const y = this.options.scaleBar.height + this.options.seqHeight * (alignment.order + 1) + this.options.sequence.topMargin - seqWidth / 2;\r\n        let seq = [];\r\n        if (this.isConservedRegionMode) {\r\n            const conservedSeq = utils.getTrueArr(alignment[\"seq\"].split(\"\"), this.conservedRegionBooleanArr);\r\n            seq = conservedSeq.slice(parseInt(this.alignmentPosition.start + 0.5), parseInt(this.alignmentPosition.end + 0.5));\r\n        } else {\r\n            seq = alignment[\"seq\"].substr(parseInt(this.alignmentPosition.start + 0.5), parseInt(this.alignmentPosition.end + 0.5) - parseInt(this.alignmentPosition.start + 0.5)).split(\"\");\r\n        }\r\n        if (seq.length == 0) return;\r\n        let seqLength = seq.length;\r\n        //        if (seq.length < 10) seqLength = 10;\r\n        this.baseWidth = (this.options.sequence.width) / seqLength;\r\n\r\n        drawer.setFillStyle(this.ctx, \"black\");\r\n        this.ctx.font = this.options.sequence.fontSize + \"px Arial serif\";\r\n\r\n        if (this.baseWidth < 10) {\r\n            utils.each(seq, (val, i) => {\r\n                drawer.drawLine(this.ctx, this.options.sequence.left + i * this.baseWidth, this.options.sequence.left + (i + 1) * this.baseWidth, y, y, this.options.colorScheme[val]);\r\n            });\r\n        } else {\r\n            utils.each(seq, (val, i) => {\r\n                drawer.drawLine(this.ctx, this.options.sequence.left + i * this.baseWidth, this.options.sequence.left + (i + 1) * this.baseWidth, y, y, this.options.colorScheme[val]);\r\n                this.ctx.fillText(val, this.options.sequence.left + (i * this.baseWidth) + this.baseWidth / 2, y + this.options.sequence.fontSize * 0.33);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    _drawSequenceLabel() {\r\n        utils.each(this.orderedAlignments, (alignment, i) => {\r\n            const y = this.options.seqHeight * (i + 1);\r\n            this.labelDiv = this.labelContainer.create(\"div\")\r\n                //.style(\"position\", \"absolute\")\r\n                //.style(\"top\", y + \"px\")\r\n                .attr(\"data-id\", alignment.name)\r\n                .style(\"font-size\", this.options.label.fontSize + \"px\")\r\n                .style(\"color\", this.group[alignment[\"group\"]].col)\r\n                .style(\"height\", this.options.seqHeight + \"px\")\r\n\r\n            const label_p = this.labelDiv.create(\"p\").style(\"margin\", \"0\")\r\n                .style(\"height\", this.options.seqHeight + \"px\");\r\n            label_p.create(\"span\")\r\n                .setClass(\"handle fas fa-expand-arrows-alt\")\r\n                .html(\" \")\r\n\r\n            label_p.elements[0].innerHTML += (alignment.name + \"_\" + alignment[\"group\"]);\r\n        });\r\n    }\r\n\r\n    _drawHighlightRect() {\r\n        utils.each(this.highlightedIndicies, (val) => {\r\n            const i = val.index;\r\n            const y = this.options.scaleBar.height + this.options.seqHeight * (i) + this.options.sequence.topMargin;\r\n            drawer.drawRect(this.ctx, this.options.sequence.left, y, this.options.sequence.width, this.options.seqHeight, \"red\", 3);\r\n        });\r\n    }\r\n\r\n    _drawScaleBar() {\r\n        if (this.options.scaleBar.enable) {\r\n            drawer.setLineWidth(this.ctx, 1.5);\r\n\r\n            const s = this.alignmentPosition.start\r\n            const e = this.alignmentPosition.end\r\n            const size = e - s;\r\n\r\n            let numBreaks = this.options.sequence.width > 500 ? 10 : 5;\r\n            let stepSize = parseInt(size / numBreaks);\r\n            numBreaks = parseInt(size / stepSize);\r\n\r\n            if (size < 30 && this.baseWidth > 20) {\r\n                numBreaks = size;\r\n                stepSize = 1;\r\n            }\r\n            let startX = this.options.sequence.left;\r\n            let startY = this.options.scaleBar.height - this.options.scaleBar.fontSize / 2;\r\n\r\n            for (let i = 0; i < numBreaks; i++) {\r\n                startX = this.options.sequence.left + i * stepSize * this.baseWidth + this.baseWidth / 2;\r\n                drawer.drawTxt(this.ctx, parseInt(s + i * stepSize + 0.5 + 1), startX, startY, this.options.scaleBar.fontSize + \"px Arial serif\");\r\n                drawer.drawLine(this.ctx, startX, startX, this.options.scaleBar.height, startY + 1, \"grey\");\r\n            }\r\n            if (stepSize !== 1) {\r\n                startX = this.options.sequence.left + parseInt(size + 0.5) * this.baseWidth - this.baseWidth / 2;\r\n                drawer.drawTxt(this.ctx, parseInt(e), startX, startY, this.options.scaleBar.fontSize + \"px Arial serif\");\r\n                drawer.drawLine(this.ctx, startX, startX, this.options.scaleBar.height, startY + 1, \"grey\");\r\n            }\r\n        }\r\n    }\r\n\r\n    _drawHeader() {\r\n        if (this.options.header.enable) {\r\n            const leftMergin = 10;\r\n            drawer.clear(this.headerCtx, this.width, this.options.header.height);\r\n            this._drawNonGrapRate();\r\n            this._drawSeqLogo();\r\n\r\n            drawer.setLineWidth(this.headerCtx, 1);\r\n            drawer.setStrokeStyle(this.headerCtx, \"black\");\r\n            const startX = this.options.header.left;\r\n            const startY = this.options.header.top;\r\n            drawer.drawLine(this.headerCtx, startX - leftMergin, startX - leftMergin, this.options.header.height + 1, startY);\r\n            drawer.drawLine(this.headerCtx, this.width - 1, this.width - 1, this.options.header.height + 1, startY);\r\n            drawer.drawLine(this.headerCtx, startX - leftMergin, this.width, startY, startY);\r\n            drawer.drawLine(this.headerCtx, startX - leftMergin, this.width, this.options.header.height + 1, this.options.header.height + 1);\r\n        }\r\n    }\r\n\r\n    _drawSeqLogo() {\r\n        if (this.options.seqLogo.enable && this.baseWidth > 10) {\r\n            // draw Y axis\r\n            drawer.setTextAlign(this.headerCtx, \"center\");\r\n            drawer.setFillStyle(this.headerCtx, \"black\");\r\n\r\n            this.headerCtx.rotate(Math.PI * 3 / 2);\r\n            drawer.drawTxt(this.headerCtx, \"bits\", -(this.options.header.height / 2), this.options.header.left - 35, \"14px sans-serif\")\r\n            this.headerCtx.rotate(Math.PI * 1 / 2);\r\n            drawer.setTextAlign(this.headerCtx, \"right\");\r\n            drawer.drawTxt(this.headerCtx, \"0\", this.options.header.left - 14, this.options.header.height, \"12px sans-serif\")\r\n            drawer.drawTxt(this.headerCtx, \"4.5\", this.options.header.left - 14, this.options.header.top + 6, \"12px sans-serif\")\r\n\r\n            drawer.setLineWidth(this.headerCtx, 1);\r\n            drawer.setTextAlign(this.headerCtx, \"center\");\r\n\r\n            this.headerCtx.font = '900 ' + 30 * (this.options.header.height - this.options.header.top) / 100 + 'px \"Arial Black\", Arial, Gadget, sans-serif';\r\n            const maxVal = Math.log2(22);\r\n            const logoHeight = this.options.header.height - this.options.header.top - 1;\r\n            const baseHeight = logoHeight / maxVal;\r\n\r\n            const startX = this.options.header.left;\r\n            const startY = this.options.header.top + 1;\r\n\r\n            const wSize = this.baseWidth;\r\n\r\n            let entropies = [];\r\n            if (this.isConservedRegionMode) {\r\n                entropies = utils.getTrueArr(this.shannonEntropyArr, this.conservedRegionBooleanArr);\r\n            } else {\r\n                entropies = this.shannonEntropyArr;\r\n            }\r\n\r\n            utils.each(entropies, (site, i) => {\r\n                if (i >= parseInt(this.alignmentPosition.start + 0.5) && i <= parseInt(this.alignmentPosition.end + 0.5 - 1)) {\r\n                    const buf = utils.filterAndSortEntroy(site);\r\n                    let preHeight = logoHeight * (1 - buf[\"sum\"] / maxVal);\r\n\r\n                    utils.each(buf[\"res\"], (val) => {\r\n                        const text = val.name.replace(\"-\", \"\\\\\");\r\n\r\n                        let height = (logoHeight) * val.value / maxVal;\r\n                        let hRate = height / baseHeight;\r\n\r\n                        this.headerCtx.transform(1, 0, 0, hRate, startX + wSize / 2 + wSize * (i - parseInt(this.alignmentPosition.start + 0.5)), startY + height + preHeight);\r\n                        this.headerCtx.fillStyle = utils.TAYLOR_COLOR[text];\r\n                        this.headerCtx.fillText(text, 0, 0, wSize);\r\n                        this.headerCtx.setTransform(1, 0, 0, 1, 0, 0);\r\n                        preHeight = height + preHeight;\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  draw 1 - gap rate\r\n     */\r\n    _drawNonGrapRate() {\r\n        if (this.options.nonGapRate.enable && this.baseWidth <= 10 && !this.isConservedRegionMode) {\r\n            drawer.setTextAlign(this.headerCtx, \"center\");\r\n            drawer.setFillStyle(this.headerCtx, \"black\");\r\n\r\n            // draw Y axis\r\n            this.headerCtx.rotate(Math.PI * 3 / 2);\r\n            drawer.drawTxt(this.headerCtx, \"1 - gap rate\", -(this.options.header.height / 2), this.options.header.left - 35, \"14px sans-serif\")\r\n            this.headerCtx.rotate(Math.PI * 1 / 2);\r\n            drawer.setTextAlign(this.headerCtx, \"right\");\r\n            drawer.drawTxt(this.headerCtx, \"0\", this.options.header.left - 14, this.options.header.height, \"12px sans-serif\")\r\n            drawer.drawTxt(this.headerCtx, \"1\", this.options.header.left - 14, this.options.header.top + 6, \"12px sans-serif\")\r\n\r\n            drawer.setTextAlign(this.headerCtx, \"center\");\r\n            drawer.setLineWidth(this.headerCtx, this.baseWidth);\r\n\r\n            const bottomLineY = this.options.header.height;\r\n            const maxVal = this.options.header.height - this.options.header.top - 1;\r\n            utils.each(this.gapRate, (val, i) => {\r\n                if (i >= parseInt(this.alignmentPosition.start + 0.5) && i <= parseInt(this.alignmentPosition.end + 0.5 - 1)) {\r\n                    const x = this.options.header.left + (i - parseInt(this.alignmentPosition.start + 0.5)) * this.baseWidth + this.baseWidth * 0.5;\r\n                    drawer.drawLine(this.headerCtx, x, x, bottomLineY, bottomLineY - maxVal * (1 - val), (1 - val >= this.options.nonGapRate.th) ? this.options.nonGapRate.highColor : this.options.nonGapRate.baseColor);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    // zoom functions\r\n    _zoomIn() {\r\n        let zoomSize = this.baseWidth < 5 ? 20 : (this.baseWidth < 10 ? 10 : 5);\r\n        if (this.alignmentPosition.end - this.alignmentPosition.start > 30) {\r\n            this.alignmentPosition.start += zoomSize;\r\n            this.alignmentPosition.end -= zoomSize;\r\n            this.drawSequences();\r\n        } else if (this.alignmentPosition.end - this.alignmentPosition.start > 10) {\r\n            this.alignmentPosition.start += 2;\r\n            this.alignmentPosition.end -= 2;\r\n            this.drawSequences();\r\n        } else if (this.alignmentPosition.end - this.alignmentPosition.start > 2) {\r\n            this.alignmentPosition.start += 1;\r\n            this.alignmentPosition.end -= 1;\r\n            this.drawSequences();\r\n        }\r\n    }\r\n\r\n    _zoomOut() {\r\n        if (this.alignmentPosition.end - this.alignmentPosition.start < 30) {\r\n            this.alignmentPosition.start -= 2;\r\n            this.alignmentPosition.end += 2;\r\n\r\n        } else {\r\n            let zoomSize = this.baseWidth < 5 ? 20 : (this.baseWidth < 10 ? 10 : 5);\r\n            if (this.alignmentPosition.start == 0 && this.alignmentPosition.end == this.alignmentPosition.size) return;\r\n            this.alignmentPosition.start -= zoomSize;\r\n            this.alignmentPosition.end += zoomSize;\r\n            if (this.alignmentPosition.start < 0) {\r\n                this.alignmentPosition.start = 0;\r\n            }\r\n            if (this.alignmentPosition.end > this.alignmentPosition.size) {\r\n                this.alignmentPosition.end = this.alignmentPosition.size;\r\n            }\r\n        }\r\n        this.drawSequences();\r\n    }\r\n\r\n    _move(x) {\r\n        if (x === 0) return;\r\n        let moveSize = x / (this.baseWidth);\r\n        this.alignmentPosition.start -= moveSize;\r\n        this.alignmentPosition.end -= moveSize;\r\n        if (this.alignmentPosition.end > this.alignmentPosition.size) {\r\n            this.alignmentPosition.start += moveSize;\r\n            this.alignmentPosition.end = this.alignmentPosition.size;\r\n        }\r\n        if (this.alignmentPosition.start < 0) {\r\n            this.alignmentPosition.start = 0;\r\n            this.alignmentPosition.end += moveSize;\r\n        }\r\n        if (parseInt(this.alignmentPosition.start + 0.5) !== parseInt(this.alignmentPosition.preStart + 0.5) ||\r\n            parseInt(this.alignmentPosition.end - this.alignmentPosition.start + 0.5) !== parseInt(this.alignmentPosition.preEnd - this.alignmentPosition.preStart + 0.5)) {\r\n            this.alignmentPosition.preStart = this.alignmentPosition.start;\r\n            this.alignmentPosition.preEnd = this.alignmentPosition.end;\r\n\r\n            this.drawSequences();\r\n        }\r\n    }\r\n\r\n    _resetZoom() {\r\n        this.alignmentPosition.preStart = this.alignmentPosition.start;\r\n        this.alignmentPosition.preEnd = this.alignmentPosition.end;\r\n        this.alignmentPosition.start = 0;\r\n        this.alignmentPosition.end = this.alignmentPosition.size;\r\n        this.drawSequences();\r\n    }\r\n}","import * as col from \"../utils/color\"\r\nconst size = {\r\n    width: 0,\r\n    height: 0,\r\n    left: 0,\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n}\r\n\r\nconst font = {\r\n    fontSize: 13\r\n}\r\n\r\nexport const options = {\r\n    elementId: \"def\",\r\n    setSize: true,\r\n    height: 600,\r\n    width: 600,\r\n    outerRadius: 400,\r\n    innnerRadius: 20,\r\n    ringMargin: 0,\r\n    highlighterEnable: true,\r\n}\r\n\r\nconst color = {\r\n    colorScheme: col.TAYLOR_COLOR,\r\n}","import {\r\n    options\r\n} from \"./option\"\r\nimport * as drawer from \"../utils/canvas\"\r\nimport * as utils from \"../utils/index\";\r\n\r\n\r\n\r\nexport class CircularGenomeBrowser {\r\n    constructor(opt) {\r\n        this.options = {\r\n            ...options,\r\n            ...opt,\r\n        }\r\n\r\n        this.container = null;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.halfX = 0;\r\n        this.halfY = 0;\r\n\r\n        this.inputJson = null;\r\n        this.numGenomes = null;\r\n\r\n        this.maxRadius = 0\r\n        this.ringSize = 0\r\n\r\n        this.highlightCanvas = null;\r\n        this.highlighter = null;\r\n    }\r\n\r\n    setContainer(elementID) {\r\n        console.log(\"load element: \" + elementID);\r\n        this.container = utils.selectID(elementID);\r\n        this.container.html(\"\");\r\n        this.options.elementId = elementID;\r\n        if (!this.options.setSize) {\r\n            this.width = this.container.elements[0].clientWidth;\r\n            this.height = this.container.elements[0].clientHeight;\r\n            this.options.outerRadius = this.width / 2 - 50;\r\n        } else {\r\n            this.height = this.options.height;\r\n            this.width = this.options.width;\r\n        }\r\n        this.canvasHeight = this.width;\r\n        this.halfX = this.width / 2;\r\n        this.halfY = this.canvasHeight / 2;\r\n    }\r\n\r\n    /**\r\n     * @param {json} json \r\n     */\r\n    setJson(json) {\r\n        this.inputJson = json;\r\n        this.numGenomes = json[\"genomes\"].length;\r\n    }\r\n\r\n    render() {\r\n        this._DOMcreate();\r\n        this.ctx = this.mainCanvas.elements[0].getContext(\"2d\");\r\n        if (this.options.highlighterEnable) {\r\n            this.highlighter = new Highlighter(this.highlightCanvas, this.width, this.canvasHeight, this.inputJson);\r\n        }\r\n        this.drawCircularGenomes();\r\n    }\r\n\r\n    _DOMcreate() {\r\n        this.bodyContainer = this.container.create(\"div\")\r\n            .setID(`${this.options.elementId}_body`)\r\n            .style(\"position\", \"relative\")\r\n            .setClass(\"d-flex flex-row\")\r\n\r\n        this.canvasContainer = this.bodyContainer.create(\"div\")\r\n            .setID(`${this.options.elementId}_canvasContainer`)\r\n            .style(\"height\", `${this.canvasHeight}px`);\r\n\r\n        this.mainCanvas = this.canvasContainer.create(\"canvas\")\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"top\", \"0\")\r\n            .setID(`${this.options.elementId}_canvas`)\r\n            .attr(\"height\", this.canvasHeight)\r\n            .attr(\"width\", this.width)\r\n            .style(\"left\", \"0\");\r\n\r\n        this.highlightCanvas = this.canvasContainer.create(\"canvas\")\r\n            .setID(`${this.options.elementId}_highlight_canvas`)\r\n            .attr(\"height\", this.canvasHeight)\r\n            .attr(\"width\", this.width)\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"top\", \"0\")\r\n            .style(\"left\", \"0\");\r\n    }\r\n\r\n    redrawCircularGenomes() {\r\n        this._drawKaryotype();\r\n        drawer.clear(this.ctx, this.width, this.canvasHeight);\r\n        this._drawCircularGenomes()\r\n    }\r\n\r\n    drawCircularGenomes() {\r\n        this._init_radius();\r\n        drawer.clear(this.ctx, this.width, this.canvasHeight);\r\n        this._drawKaryotype();\r\n        this._drawCircularGenomes()\r\n    }\r\n\r\n    _init_radius() {\r\n        this.ringSize = ((this.options.outerRadius - (this.numGenomes - 1) * this.options.ringMargin - this.options.innnerRadius) / this.numGenomes);\r\n        if (this.ringSize < 0) {\r\n            this.options.ringMargin = 1;\r\n            this.ringSize = ((this.options.outerRadius - (this.numGenomes - 1) * this.options.ringMargin - this.options.innnerRadius) / this.numGenomes);\r\n        }\r\n        if (this.ringSize < 0) {\r\n            this.options.ringMargin = 0;\r\n            this.ringSize = ((this.options.outerRadius - this.options.innnerRadius) / this.numGenomes);\r\n        }\r\n\r\n        console.log(\"Ring size: \" + this.ringSize);\r\n        console.log('this.options.ringMargin:', this.options.ringMargin);\r\n        this.maxRadius = this.options.outerRadius + this.ringSize / 2;\r\n        if (this.highlighter) this.highlighter.maxRadius = this.maxRadius + 10;\r\n        for (let i = 0; i < this.numGenomes; i++) {\r\n            this.inputJson.genomes[i][\"r\"] = this.options.outerRadius - this.inputJson.genomes[i].order * (this.ringSize + this.options.ringMargin)\r\n        }\r\n    }\r\n\r\n    _drawCircularGenomes() {\r\n        drawer.setLineWidth(this.ctx, this.ringSize);\r\n        for (let i = 0; i < this.numGenomes; i++) {\r\n            for (let l = 0; l < this.inputJson.genomes[i].genes.length; l++) {\r\n                drawer.drawArc(this.ctx, this.halfX, this.halfY, this.inputJson.genomes[i][\"r\"], this.inputJson.genomes[i].genes[l][\"start_rotated_rad\"], this.inputJson.genomes[i].genes[l][\"end_rotated_rad\"], this.inputJson.genomes[i].genes[l].angle);\r\n            }\r\n        }\r\n    }\r\n\r\n    _drawKaryotype() {\r\n        drawer.setLineWidth(this.ctx, 5);\r\n        for (let i = 0; i < 360; i++) {\r\n            drawer.drawArc(this.ctx, this.halfX, this.halfY, this.maxRadius, this.convertDeg2Rad(i), this.convertDeg2Rad(i + 1), i);\r\n        }\r\n    }\r\n\r\n    convertDeg2Rad(deg) {\r\n        return 2 * Math.PI * deg / 360;\r\n    }\r\n}\r\n\r\nclass Highlighter {\r\n    constructor(canvas, width, height, json) {\r\n        this.canvas = canvas;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.halfX = this.width / 2;\r\n        this.halfY = this.height / 2;\r\n        this.maxRadius = 0;\r\n        this.ctx = this.canvas.elements[0].getContext(\"2d\");\r\n        this.inputJson = json;\r\n        this.isHighlightLock = false;\r\n        this.zoomSize = 0.5;\r\n        this.updateFunction = null;\r\n\r\n        this.zoomStart = 0;\r\n        this.zoomEnd = 0;\r\n        this._init();\r\n    }\r\n    clear() {\r\n        drawer.clear(this.ctx, this.width, this.height);\r\n    }\r\n    showArc(start, end) {\r\n        this.clear();\r\n        this.setLineWidth(5);\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(this.halfX, this.halfY);\r\n        this.ctx.arc(this.halfX, this.halfY, this.maxRadius, start, end);\r\n        this.ctx.fillStyle = \"rgba(50,50,50,0.5)\";\r\n        this.ctx.strokeStyle = \"rgba(50,50,50, 0.7)\";\r\n        this.ctx.closePath();\r\n        this.ctx.fill();\r\n        this.ctx.stroke();\r\n        this.ctx.restore();\r\n    }\r\n    showArcRegions(r, ringSize, start, end) {\r\n        this.ctx.beginPath();\r\n        this.ctx.arc(this.halfX, this.halfY, r + ringSize / 2, start, end);\r\n        this.ctx.lineTo(this.halfX + (r - ringSize / 2) * Math.cos(end), this.halfY + (r - ringSize / 2) * Math.sin(end));\r\n        this.ctx.arc(this.halfX, this.halfY, r - ringSize / 2, end, start, true);\r\n        this.ctx.lineTo(this.halfX + (r + ringSize / 2) * Math.cos(start), this.halfY + (r + ringSize / 2) * Math.sin(start));\r\n        this.ctx.stroke();\r\n        this.ctx.fill();\r\n    }\r\n    setLineWidth(x) {\r\n        drawer.setLineWidth(this.ctx, x);\r\n    }\r\n\r\n    setUpdateFunction(func) {\r\n        this.updateFunction = func;\r\n    }\r\n\r\n    _init() {\r\n        this.canvas\r\n            .on(\"mousemove\", () => {\r\n                if (!this.isHighlightLock) {\r\n                    const xy = this.canvas.mouse;\r\n                    const angle = this._getAngleFromMousePosition(xy);\r\n                    this.zoomStart = angle - this.zoomSize;\r\n                    this.zoomEnd = angle + this.zoomSize;\r\n                    this.showArc(this.zoomStart, this.zoomEnd);\r\n                }\r\n            })\r\n            .on(\"mouseleave\", () => {\r\n                if (!this.isHighlightLock) {\r\n                    this.clear();\r\n                }\r\n            })\r\n            .on(\"dblclick\", () => {\r\n                event.preventDefault();\r\n            })\r\n\r\n            .on(\"click\", () => {\r\n                event.preventDefault();\r\n                if (!this.isHighlightLock) {\r\n                    this.isHighlightLock = true;\r\n                    if (this.updateFunction) {\r\n                        this.updateFunction(this.zoomStart, this.zoomEnd);\r\n                    }\r\n                } else {\r\n                    this.isHighlightLock = false;\r\n                }\r\n            });\r\n    }\r\n    _getAngleFromMousePosition(xy) {\r\n        let x = xy[0] - this.halfX;\r\n        let y = xy[1] - this.halfX;\r\n        let tan = y / x;\r\n        let angle = Math.atan(tan);\r\n        if (x < 0) {\r\n            return angle + Math.PI;\r\n        } else {\r\n            return angle;\r\n        }\r\n    }\r\n\r\n}","import * as col from \"../utils/color\"\r\nconst size = {\r\n    width: 0,\r\n    height: 0,\r\n    left: 0,\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n}\r\n\r\nconst font = {\r\n    fontSize: 13\r\n}\r\n\r\nexport const options = {\r\n    elementId: \"def\",\r\n    setSize: false,\r\n    height: 600,\r\n    width: 600,\r\n    seqHeight: 20,\r\n    label: {\r\n        top: 10,\r\n        left: 20,\r\n        width: 200,\r\n    },\r\n    sequence: {\r\n        top: 10,\r\n        left: 20,\r\n    }\r\n}\r\n\r\nconst color = {\r\n    colorScheme: col.TAYLOR_COLOR,\r\n}","import {\r\n    options\r\n} from \"./option\"\r\nimport * as drawer from \"../utils/canvas\"\r\nimport * as utils from \"../utils/index\";\r\n\r\n\r\n\r\nexport class LinearGenomeBrowser {\r\n    constructor(opt) {\r\n        this.options = {\r\n            ...options,\r\n            ...opt,\r\n        }\r\n    }\r\n\r\n    setContainer(elementID) {\r\n        console.log(\"load element: \" + elementID);\r\n        this.container = utils.selectID(elementID);\r\n        this.container.html(\"\");\r\n        this.options.elementId = elementID;\r\n        if (!this.options.setSize) {\r\n            this.width = this.container.elements[0].clientWidth;\r\n            this.height = this.container.elements[0].clientHeight;\r\n        } else {\r\n            this.height = this.options.height;\r\n            this.width = this.options.width;\r\n        }\r\n        this.canvasHeight = this.width;\r\n        this.halfX = this.width / 2;\r\n        this.halfY = this.canvasHeight / 2;\r\n    }\r\n\r\n    setJson(json) {\r\n        this.inputJson = json;\r\n        this.numGenomes = json[\"genomes\"].length;\r\n    }\r\n\r\n    render() {\r\n        this._DOMcreate();\r\n        this.ctx = this.mainCanvas.elements[0].getContext(\"2d\");\r\n        drawLinearGenomes();\r\n    }\r\n\r\n    drawLinearGenomes() {\r\n        _drawLabels();\r\n\r\n    }\r\n\r\n    _DOMcreate() {\r\n        this.headerContainer = this.container.create(\"div\")\r\n            .setID(`${this.options.elementId}_header`)\r\n        //    .html(\"Alignment Viewer Header\");\r\n\r\n        this.bodyContainer = this.container.create(\"div\")\r\n            .setID(`${this.options.elementId}_body`)\r\n            .style(\"position\", \"relative\")\r\n            .setClass(\"d-flex flex-row\")\r\n\r\n        this.canvasContainer = this.bodyContainer.create(\"div\")\r\n            .setID(`${this.options.elementId}_canvasContainer`)\r\n            .style(\"position\", \"relative\")\r\n            .style(\"height\", `${this.canvasHeight}px`);\r\n\r\n        this.labelContainer = this.bodyContainer.create(\"div\")\r\n            .setID(`${this.options.elementId}_label`)\r\n            //.style(\"position\", \"absolute\")\r\n            //.style(\"height\", `${this.canvasHeight}px`)\r\n            //.style(\"width\", `${this.options.label.width}px`)\r\n            .style(\"margin-left\", `${this.options.label.left}px`)\r\n            .style(\"margin-top\", `${this.options.label.top}px`)\r\n\r\n        this.mainCanvas = this.canvasContainer.create(\"canvas\")\r\n            .setID(`${this.options.id}_canvas`)\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"left\", (this.options.label.width + this.options.label.left) + \"px\")\r\n            .style(\"top\", this.options.sequence.top + \"px\")\r\n            .attr(\"height\", this.canvasHeight)\r\n            .attr(\"width\", this.width - this.options.label.width - this.options.label.left);\r\n    }\r\n\r\n    _drawLabels() {\r\n        utils.each(this.inputJson[\"genomes\"], (genome, i) => {\r\n            const y = this.options.seqHeight * (genome.order + 1);\r\n            this.labelDiv = this.labelContainer.create(\"div\")\r\n                //.style(\"position\", \"absolute\")\r\n                //.style(\"top\", y + \"px\")\r\n                .attr(\"data-id\", genome.name)\r\n                .style(\"font-size\", this.options.label.fontSize + \"px\")\r\n                //.style(\"color\", this.group[genome[\"group\"]].col)\r\n                .style(\"height\", this.options.seqHeight + \"px\")\r\n\r\n            const label_p = this.labelDiv.create(\"p\").style(\"margin\", \"0\")\r\n                .style(\"height\", this.options.seqHeight + \"px\");\r\n            label_p.create(\"span\")\r\n                .setClass(\"handle fas fa-expand-arrows-alt\")\r\n                .html(\" \")\r\n\r\n            label_p.elements[0].innerHTML += (genome.name);\r\n        });\r\n    }\r\n\r\n}"],"names":["ObjProto","Object","prototype","toString","hasOwnProperty","has","obj","path","call","nativeKeys","keys","shallowProperty","key","MAX_ARRAY_INDEX","Math","pow","getLength","isArrayLike","collection","length","optimizeCb","func","context","argCount","value","index","console","log","accumulator","apply","arguments","isObject","type","getKeys","push","each","iteratee","i","group","behavior","partition","result","groupBy","countBy","indexBy","seqStat","seqs","results","init","len","others","seq","seqArr","split","val","isConservedRegoin","conserved","conservedRegionLength","counter","calcGapRate","numSeq","res","calcShannonEntropy","s","v","log2","filterAndSortEntroy","entropyArr","buf","name","sort","a","b","getTrueArr","resourceArr","booleanArr","getAllSequenceAsFasta","sequenceObj","ret","join","getConservedRegionAsFasta","Selector","elements","mouse","eventType","callback","capture","_","el","addEventListener","rect","getBoundingClientRect","event","clientX","left","clientLeft","clientY","top","clientTop","elementName","newEle","document","createElement","appendChild","stylName","styleValue","style","setProperty","attrName","attrValue","setAttribute","className","attr","idName","text","textContent","selectID","getElementById","selectClass","getElementsByClassName","select","querySelector","selectAll","querySelectorAll","input","fetch","then","response","ok","Error","status","statusText","json","CLUSTAL2_COLOR","A","R","N","D","C","Q","E","G","H","I","L","K","M","F","P","S","T","W","Y","V","B","X","Z","STRAND_COLOR","TAYLOR_COLOR","hsvToRgb","Hp","abs","m","floor","COLER_ARR","k","j","getColorPallet","getColors","stepSize","PROTEIN_COL_V1","generateLink","fileName","dataPath","link","download","href","exportSVG","svgElement","svg","svgString","window","ActiveXObject","xml","oSerializer","XMLSerializer","serializeToString","click","exportText","textString","blob","Blob","url","URL","createObjectURL","exportJson","replacer","indent","JSON","stringify","size","width","height","right","bottom","font","fontSize","options","id","setSize","seqHeight","isGrouping","colorScheme","col","header","enable","seqLogo","nonGapRate","baseColor","highColor","th","label","sequence","topMargin","bottomMargin","scaleBar","deg90","PI","setLineWidth","ctx","lineWidth","setTextAlign","align","textAlign","setFillStyle","fStyle","fillStyle","setStrokeStyle","sStyle","strokeStyle","drawLine","startX","endX","startY","endY","beginPath","moveTo","lineTo","stroke","drawRect","x","y","strokeRect","drawArc","r","startRad","endRad","angle","color","arc","drawTxt","fillText","clear","clearRect","AlignmentPosition","start","end","preStart","preEnd","getGroup","dicArr","_group","utils","arr","count","names","Alignment","opt","mainCanvas","isDragging","container","inputJson","canvasHeight","headerContainer","bodyContainer","labelContainer","labelDiv","canvasContainer","alignmentPosition","baseWidth","seqLength","orderedAlignments","highlightedIndicies","isConservedRegionMode","conservedRegionBooleanArr","headerCanvas","headerCtx","gapRate","shannonEntropyArr","elementID","html","clientWidth","clientHeight","order","Array","alignment","_DOMcreate","getContext","_initHeader","_drawSequenceLabel","drawSequences","update","conservedSeq","targetSeq","slice","parseInt","substr","create","setID","setClass","on","preventDefault","_move","movementX","devicePixelRatio","deltaY","_zoomOut","_zoomIn","button","_resetZoom","sortable","sortArr","toArray","indexOf","drawer","seqWidth","_drawSequence","_drawHighlightRect","_drawScaleBar","_drawHeader","label_p","innerHTML","e","numBreaks","leftMergin","_drawNonGrapRate","_drawSeqLogo","rotate","maxVal","logoHeight","baseHeight","wSize","entropies","site","preHeight","replace","hRate","transform","setTransform","bottomLineY","zoomSize","moveSize","elementId","outerRadius","innnerRadius","ringMargin","highlighterEnable","CircularGenomeBrowser","halfX","halfY","numGenomes","maxRadius","ringSize","highlightCanvas","highlighter","Highlighter","drawCircularGenomes","_drawKaryotype","_drawCircularGenomes","_init_radius","genomes","l","genes","convertDeg2Rad","deg","canvas","isHighlightLock","updateFunction","zoomStart","zoomEnd","_init","closePath","fill","restore","cos","sin","xy","_getAngleFromMousePosition","showArc","tan","atan","LinearGenomeBrowser","drawLinearGenomes","_drawLabels","genome"],"mappings":"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"}